@inject CombinationOfSchoolCode.Shared.GameEngine Engine
@code {
    [Parameter] public EventCallback OnExit { get; set; }
    private static readonly Random _random = new();
    int number, left;
    string? msg, guess = "";
    bool over;
    protected override void OnInitialized() => Reset();
    void Submit()
    {
        if (over) return;
        if (!int.TryParse(guess, out int g)) { msg = "Invalid value!"; return; }
        if (g == number) { msg = $"Correct! Number was {number}."; over = true; Engine.AddWin(); return; }
        msg = g < number ? "Too low!" : "Too high!"; left--;
        if (left == 0) { over = true; msg = $"You lose! Number was {number}."; Engine.AddLoss(); }
        guess = "";
    }
    void Reset() { number = _random.Next(1, 101); left=10; msg=null; over=false; guess=""; }
}
<h3>Number Guessing</h3>
@if (over)
{
    <b>@msg</b><br /><button @onclick="Reset">Restart</button> <button @onclick="OnExit.InvokeAsync">Menu</button>
}
else
{
    <div>
        <input @bind="guess" @onkeydown:enter="Submit" placeholder="Guess 1-100" />
        <button @onclick="Submit">Guess</button>
        <div>@msg</div>
        Attempts left: @left
        <br /><button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}