@inject CombinationOfSchoolCode.Shared.GameEngine Engine

<h3>Pick A Path - The Enchanted Forest</h3>

@if (currentNode == "start")
{
    <div>
        <h4>ğŸŒ² Welcome, Adventurer! ğŸŒ²</h4>
        <p>You stand at the edge of an ancient enchanted forest. The trees tower above you, their branches swaying mysteriously in the wind. You've heard tales of a legendary treasure hidden deep within, but also of the dangers that lurk in the shadows.</p>
        <p>Before you are multiple paths leading into the forest, each promising adventure:</p>
        <button @onclick='() => MakeChoice("path_left")' class="choice-btn">Take the left path (looks well-traveled)</button>
        <button @onclick='() => MakeChoice("path_center")' class="choice-btn">Take the center path (darker and mysterious)</button>
        <button @onclick='() => MakeChoice("path_right")' class="choice-btn">Take the right path (sunlight filters through)</button>
        <button @onclick='() => MakeChoice("path_north")' class="choice-btn">Take the northern trail (less traveled)</button>
        <button @onclick='() => MakeChoice("eastern_path")' class="choice-btn">Take the eastern cliff path (scenic route)</button>
        <button @onclick='() => MakeChoice("underground_passage")' class="choice-btn">Explore the hidden underground entrance</button>
        <button @onclick='() => MakeChoice("sky_path")' class="choice-btn">Take the mountain path toward the clouds</button>
        <button @onclick='() => MakeChoice("desert_oasis")' class="choice-btn">Follow the desert trail to the oasis</button>
        <button @onclick='() => MakeChoice("frozen_lake")' class="choice-btn">Head toward the frozen lake</button>
        <button @onclick='() => MakeChoice("jungle_temple")' class="choice-btn">Venture into the jungle temple</button>
        <button @onclick='() => MakeChoice("volcanic_cave")' class="choice-btn">Enter the volcanic caves</button>
        <button @onclick='() => MakeChoice("enchanted_garden")' class="choice-btn">Find the enchanted garden</button>
        <button @onclick='() => MakeChoice("time_rift")' class="choice-btn">Investigate the strange time rift</button>
        <button @onclick='() => MakeChoice("mirror_maze")' class="choice-btn">Enter the hall of mirrors</button>
        <button @onclick='() => MakeChoice("singing_stones")' class="choice-btn">Visit the singing stone circle</button>
        <button @onclick='() => MakeChoice("library_eternal")' class="choice-btn">Discover the infinite library</button>
        <button @onclick='() => MakeChoice("crystal_tower")' class="choice-btn">Climb the crystal tower</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "path_left")
{
    <div>
        <h4>ğŸ›¤ï¸ The Well-Traveled Path</h4>
        <p>You follow the left path. The ground is worn smooth by countless footsteps. After a short walk, you encounter an old merchant sitting beside a campfire.</p>
        <p>"Greetings, traveler!" he says. "I have a magical compass that always points to treasure. I'll trade it for 50 gold coins, or you can try your luck without it."</p>
        <button @onclick='() => MakeChoice("buy_compass")' class="choice-btn">Buy the compass (you have exactly 50 gold)</button>
        <button @onclick='() => MakeChoice("decline_merchant")' class="choice-btn">Politely decline and continue</button>
        <button @onclick='() => MakeChoice("rob_merchant")' class="choice-btn">Attempt to rob the merchant</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "path_center")
{
    <div>
        <h4>ğŸŒ‘ The Dark Path</h4>
        <p>The center path grows darker as you venture deeper. Strange whispers echo around you. Suddenly, you see glowing eyes in the shadowsâ€”a dire wolf blocks your path!</p>
        <p>The wolf growls menacingly. What do you do?</p>
        <button @onclick='() => MakeChoice("fight_wolf")' class="choice-btn">Fight the wolf with your sword</button>
        <button @onclick='() => MakeChoice("befriend_wolf")' class="choice-btn">Try to befriend the wolf with food</button>
        <button @onclick='() => MakeChoice("run_from_wolf")' class="choice-btn">Run away quickly</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "path_right")
{
    <div>
        <h4>â˜€ï¸ The Sunlit Path</h4>
        <p>The right path is pleasant and warm. Sunlight dances through the leaves. You come across a beautiful clearing with a crystal-clear pond.</p>
        <p>In the center of the pond, you see something shimmering beneath the water. A sign reads: "Only the pure of heart may claim the prize."</p>
        <button @onclick='() => MakeChoice("swim_pond")' class="choice-btn">Swim to the center of the pond</button>
        <button @onclick='() => MakeChoice("walk_around_pond")' class="choice-btn">Walk around the pond and continue</button>
        <button @onclick='() => MakeChoice("drink_water")' class="choice-btn">Drink from the pond first</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "buy_compass")
{
    <div>
        <h4>ğŸ§­ The Magical Compass</h4>
        <p>You trade your gold for the compass. It immediately spins and points deeper into the forest. Following it carefully, you navigate through dangerous areas safely.</p>
        <p>The compass leads you to a hidden cave. Inside, you find the legendary treasure chest!</p>
        <p><strong>ğŸ† Victory! You found the treasure!</strong></p>
        <p>The compass was worth every coin. You return home a wealthy adventurer!</p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "decline_merchant")
{
    <div>
        <h4>ğŸ—ºï¸ Going Alone</h4>
        <p>You thank the merchant and continue on your own. The path splits again into two trails. One leads uphill, the other downhill.</p>
        <button @onclick='() => MakeChoice("uphill")' class="choice-btn">Take the uphill trail</button>
        <button @onclick='() => MakeChoice("downhill")' class="choice-btn">Take the downhill trail</button>
        <button @onclick='() => MakeChoice("follow_stream")' class="choice-btn">Follow a nearby stream</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "rob_merchant")
{
    <div>
        <h4>âš”ï¸ Bad Decision</h4>
        <p>You attempt to rob the merchant, but he's actually a powerful wizard in disguise!</p>
        <p>"Foolish mortal!" he thunders, and with a wave of his staff, you're turned into a frog.</p>
        <p><strong>ğŸ’€ Game Over! You spent the rest of your days as a frog by the merchant's campfire.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "fight_wolf")
{
    <div>
        <h4>âš”ï¸ The Battle</h4>
        <p>You draw your sword and face the dire wolf. The battle is fierce! You manage to wound the wolf, but it's stronger than you expected.</p>
        <p>With a final lunge, the wolf overpowers you.</p>
        <p><strong>ğŸ’€ Game Over! The dire wolf was too powerful.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "befriend_wolf")
{
    <div>
        <h4>ğŸº A Loyal Companion</h4>
        <p>You slowly offer the wolf some dried meat from your pack. The wolf sniffs cautiously, then accepts your offering.</p>
        <p>The wolf's eyes soften, and it begins to wag its tail. It becomes your loyal companion!</p>
        <p>Together, you explore deeper into the forest. The wolf's keen senses lead you safely past traps and dangers, eventually finding a secret grove where the treasure lies!</p>
        <p><strong>ğŸ† Victory! With your new companion's help, you found the treasure!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "run_from_wolf")
{
    <div>
        <h4>ğŸƒ Retreat!</h4>
        <p>You turn and run as fast as you can! The wolf chases you briefly but gives up. You keep running until you can't hear it anymore.</p>
        <p>When you stop to catch your breath, you realize you've run straight into a different part of the forest. You see sunlight filtering through trees aheadâ€”it looks like the right path's sunlit clearing!</p>
        <button @onclick='() => MakeChoice("reach_pond_tired")' class="choice-btn">Head toward the sunlight</button>
        <button @onclick='() => MakeChoice("rest_and_regroup")' class="choice-btn">Rest here and plan your next move</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "reach_pond_tired")
{
    <div>
        <h4>â˜€ï¸ The Familiar Pond</h4>
        <p>You emerge at the crystal-clear pond you would have found on the right path. But you're exhausted from running and your judgment is clouded.</p>
        <p>In your desperate state, you forget to read the sign and rush into the water without thinking.</p>
        <button @onclick='() => MakeChoice("swim_pond")' class="choice-btn">Swim to the center (you need that prize!)</button>
        <button @onclick='() => MakeChoice("rest_by_pond")' class="choice-btn">Rest by the pond first</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "rest_and_regroup")
{
    <div>
        <h4>ğŸ§˜ Moment of Clarity</h4>
        <p>You sit down and take deep breaths, letting your racing heart slow down. As you rest, you notice something interestingâ€”ancient carved symbols on nearby trees.</p>
        <p>These symbols form a trail! Someone long ago marked a path through the forest. You have enough energy to follow them now.</p>
        <button @onclick='() => MakeChoice("follow_symbols")' class="choice-btn">Follow the ancient symbols</button>
        <button @onclick='() => MakeChoice("ignore_symbols")' class="choice-btn">Ignore them and find your own way</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "rest_by_pond")
{
    <div>
        <h4>ğŸ’­ Renewed Spirit</h4>
        <p>You rest by the pond, drinking carefully from your waterskin. As your exhaustion fades, you notice the sign: "Only the pure of heart may claim the prize."</p>
        <p>Now that you're thinking clearly, you remember reading about this pond in old legends. The test isn't about swimmingâ€”it's about respect and patience.</p>
        <p>You meditate by the water's edge, and the pond itself responds to your pure intentions, rising up to present you with the magical crystal!</p>
        <p><strong>ğŸ† Victory! Patience and respect earned the pond's blessing!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "follow_symbols")
{
    <div>
        <h4>ğŸ—¿ The Ancient Path</h4>
        <p>You follow the carved symbols from tree to tree. They lead you through safe passages, around hidden dangers, and finally to a stone monument.</p>
        <p>At the monument, you find an inscription: "The treasure seeks those who follow wisdom." Behind the monument lies a hidden stairway leading underground.</p>
        <p>You descend and find the treasure chamber, untouched for centuries!</p>
        <p><strong>ğŸ† Victory! The ancient ones guided you true!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "ignore_symbols")
{
    <div>
        <h4>ğŸŒ² Lost in the Woods</h4>
        <p>You decide to trust your own instincts instead of following mysterious symbols. However, without a clear direction, you soon become hopelessly lost.</p>
        <p>After wandering for hours in circles, you finally find a path that leads you out of the forest, but the treasure remains hidden.</p>
        <p><strong>ğŸ˜ Loss: Pride led you astray from the treasure's path.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "swim_pond")
{
    <div>
        <h4>ğŸ’ The Crystal Prize</h4>
        <p>You wade into the pond and swim to the center. The water is refreshing and pure. As you reach the shimmering object, you find it's a magical crystal!</p>
        <p>The crystal glows with inner light and grants you the vision to see hidden paths. Using this gift, you easily navigate to the treasure's location!</p>
        <p><strong>ğŸ† Victory! The pure waters rewarded your brave heart!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "walk_around_pond")
{
    <div>
        <h4>ğŸš¶ The Long Way</h4>
        <p>You decide not to disturb the pond and walk around it. The path continues through pleasant forest, and you come across several interesting locations.</p>
        <p>To your left, you see smoke risingâ€”perhaps a cabin. Straight ahead, the forest grows darker. To your right, you hear what sounds like a waterfall. You also notice a mystical glade glowing nearby.</p>
        <button @onclick='() => MakeChoice("investigate_cabin")' class="choice-btn">Head toward the smoke (left)</button>
        <button @onclick='() => MakeChoice("dark_forest_ahead")' class="choice-btn">Continue into the darker forest (ahead)</button>
        <button @onclick='() => MakeChoice("find_waterfall")' class="choice-btn">Follow the sound of the waterfall (right)</button>
        <button @onclick='() => MakeChoice("mystical_glade")' class="choice-btn">Explore the mystical glade</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "investigate_cabin")
{
    <div>
        <h4>ğŸ  The Hermit's Home</h4>
        <p>You approach a small cabin. An old hermit sits on the porch, carving wood. He looks up and smiles warmly.</p>
        <p>"Lost traveler, are you?" he asks. "I've lived in these woods for fifty years. The treasure you seek isn't far. I can tell you the way... for a price."</p>
        <button @onclick='() => MakeChoice("pay_hermit")' class="choice-btn">Offer him your remaining gold</button>
        <button @onclick='() => MakeChoice("ask_riddle")' class="choice-btn">Ask if you can earn the information</button>
        <button @onclick='() => MakeChoice("decline_hermit")' class="choice-btn">Thank him and continue alone</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "dark_forest_ahead")
{
    <div>
        <h4>ğŸŒ‘ Twilight Path</h4>
        <p>The forest grows darker and more foreboding. Ancient trees loom overhead, blocking out the sun. You feel like you're being watched.</p>
        <p>Suddenly, you hear a familiar growlâ€”the dire wolf! But this time, it's surrounded by a pack. You realize you've wandered into their territory.</p>
        <p><strong>ğŸ’€ Game Over! The wolf pack was too much to handle alone.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "find_waterfall")
{
    <div>
        <h4>ğŸ’§ Cascading Waters</h4>
        <p>You find a beautiful waterfall cascading down mossy rocks. The mist creates tiny rainbows in the air. Behind the waterfall, you notice a cave entrance!</p>
        <button @onclick='() => MakeChoice("behind_waterfall")' class="choice-btn">Go behind the waterfall</button>
        <button @onclick='() => MakeChoice("climb_waterfall")' class="choice-btn">Climb up beside the waterfall</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "pay_hermit")
{
    <div>
        <h4>ğŸ’° The Deal</h4>
        <p>You give the hermit your remaining gold. He nods appreciatively and provides you with detailed directions and a hand-drawn map.</p>
        <p>"Follow this path exactly," he says. "Don't deviate even a single step."</p>
        <p>Following his instructions precisely, you navigate through hidden passages and arrive at the treasure's location within hours!</p>
        <p><strong>ğŸ† Victory! The hermit's knowledge was worth every coin!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "ask_riddle")
{
    <div>
        <h4>ğŸ­ The Riddle Challenge</h4>
        <p>The hermit's eyes twinkle. "A seeker of knowledge! Very well. Answer my riddle correctly, and I'll guide you freely."</p>
        <p>"I speak without a mouth and hear without ears. I have no body, but I come alive with wind. What am I?"</p>
        <button @onclick='() => MakeChoice("answer_echo")' class="choice-btn">An echo</button>
        <button @onclick='() => MakeChoice("answer_wind")' class="choice-btn">The wind</button>
        <button @onclick='() => MakeChoice("answer_voice")' class="choice-btn">A voice</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "decline_hermit")
{
    <div>
        <h4>ğŸ’ Independent Journey</h4>
        <p>You thank the hermit but decide to continue on your own path. He shrugs and returns to his carving.</p>
        <p>You wander for hours, and eventually the sun begins to set. Without guidance, you realize you're no closer to the treasure and decide to head home.</p>
        <p><strong>ğŸ˜ Loss: Sometimes accepting help is the wiser choice.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "behind_waterfall")
{
    <div>
        <h4>âœ¨ Secret Sanctuary</h4>
        <p>You carefully make your way behind the waterfall. The cave is beautiful, with glowing mushrooms providing soft light.</p>
        <p>In the center of the cave, protected by the waterfall for centuries, sits the legendary treasure on a stone pedestal!</p>
        <p><strong>ğŸ† Victory! The waterfall hid the greatest secret!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "climb_waterfall")
{
    <div>
        <h4>ğŸ§— The Climb</h4>
        <p>You attempt to climb the slippery rocks beside the waterfall. The moss makes it incredibly difficult.</p>
        <p>Your hand slips on a wet rock, and you fall into the pool below. The current is stronger than expected and pulls you downstream.</p>
        <p>You survive but are swept far from the treasure's location, exhausted and defeated.</p>
        <p><strong>ğŸ˜ Loss: The waterfall's power was too great.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_echo")
{
    <div>
        <h4>ğŸ‰ Correct Answer!</h4>
        <p>"Well done!" the hermit exclaims. "You have wisdom beyond your years. An echo indeed!"</p>
        <p>True to his word, he provides you with excellent directions. He even gives you a special token that will help you past the final guardian.</p>
        <p>With his help, you successfully navigate to the treasure and claim it!</p>
        <p><strong>ğŸ† Victory! Wisdom opened the path to fortune!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_wind")
{
    <div>
        <h4>âŒ Wrong Answer</h4>
        <p>"No, no," the hermit shakes his head. "The wind has a body of sortsâ€”moving air. Think again, but I can only give one chance."</p>
        <p>Disappointed, you continue without his help. You wander but never find the treasure.</p>
        <p><strong>ğŸ˜ Loss: The riddle stumped you.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_voice")
{
    <div>
        <h4>âŒ Not Quite</h4>
        <p>"A voice requires a mouth," the hermit says gently. "Close, but not correct. I cannot help you now."</p>
        <p>You thank him and move on, but without guidance, the treasure remains elusive.</p>
        <p><strong>ğŸ˜ Loss: So close, yet so far.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "drink_water")
{
    <div>
        <h4>ğŸ§ª Poisoned!</h4>
        <p>You kneel and drink from the pond. The water tastes sweet at first, but then you feel dizzy.</p>
        <p>The sign said "pure of heart" - but drinking was a test of greed! The water was enchanted to reveal those who would take without permission.</p>
        <p><strong>ğŸ’€ Game Over! The enchanted water was not meant for drinking.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "uphill")
{
    <div>
        <h4>â›°ï¸ Mountain Peak</h4>
        <p>You climb the steep uphill path. It's exhausting, but at the top, you find a magnificent view. From here, you spot smoke rising from a hidden valley belowâ€”a sign of civilization!</p>
        <p>You descend and find a village of forest dwellers. They've been guarding the treasure for generations and, impressed by your perseverance in climbing the mountain, they grant you access to it!</p>
        <p><strong>ğŸ† Victory! Your determination was rewarded!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "downhill")
{
    <div>
        <h4>ğŸ•³ï¸ The Ravine</h4>
        <p>You take the easier downhill path. It leads to a deep ravine with a rickety rope bridge.</p>
        <p>The bridge looks dangerous but it's the only way across. You notice some vines along the cliff wall that might provide an alternative route.</p>
        <button @onclick='() => MakeChoice("cross_bridge")' class="choice-btn">Carefully cross the bridge</button>
        <button @onclick='() => MakeChoice("climb_vines")' class="choice-btn">Climb down using the vines</button>
        <button @onclick='() => MakeChoice("explore_ravine")' class="choice-btn">Explore along the ravine edge</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "follow_stream")
{
    <div>
        <h4>ğŸŒŠ The Flowing Stream</h4>
        <p>You follow the gentle stream through the forest. The water sparkles in the dappled sunlight. After a while, you hear voices ahead.</p>
        <p>You peek through the bushes and see a group of travelers setting up camp. They seem friendly, but you're cautious.</p>
        <button @onclick='() => MakeChoice("join_travelers")' class="choice-btn">Approach and greet the travelers</button>
        <button @onclick='() => MakeChoice("sneak_past")' class="choice-btn">Quietly sneak past them</button>
        <button @onclick='() => MakeChoice("observe_travelers")' class="choice-btn">Hide and observe them first</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "cross_bridge")
{
    <div>
        <h4>ğŸŒ‰ Brave Crossing</h4>
        <p>You test the bridge carefully with your weight. The wood creaks ominously but holds. Step by step, you make your way across.</p>
        <p>Just as you reach the other side, a plank breaks behind you! You made it safely, though your heart is racing.</p>
        <p>On the other side, you find an old trail marker with multiple arrows pointing toward "Crystal Caves", "Ancient Ruins", "Enchanted Bridge", and "Mysterious Cave".</p>
        <button @onclick='() => MakeChoice("crystal_caves")' class="choice-btn">Head to the Crystal Caves</button>
        <button @onclick='() => MakeChoice("ancient_ruins")' class="choice-btn">Explore the Ancient Ruins</button>
        <button @onclick='() => MakeChoice("enchanted_bridge")' class="choice-btn">Find the Enchanted Bridge</button>
        <button @onclick='() => MakeChoice("mysterious_cave")' class="choice-btn">Enter the Mysterious Cave</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "climb_vines")
{
    <div>
        <h4>ğŸŒ¿ The Descent</h4>
        <p>You grab onto the thick vines and begin climbing down the cliff face. The vines are stronger than they look.</p>
        <p>Halfway down, you discover a hidden cave entrance! Inside, you can hear the sound of dripping waterâ€”and something else moving in the darkness.</p>
        <button @onclick='() => MakeChoice("enter_cave")' class="choice-btn">Explore the hidden cave</button>
        <button @onclick='() => MakeChoice("continue_down")' class="choice-btn">Continue climbing down</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "explore_ravine")
{
    <div>
        <h4>ğŸï¸ The Ravine's Edge</h4>
        <p>You walk along the ravine edge, looking for a safer passage. The path narrows dangerously, and loose rocks tumble into the depths below.</p>
        <p>Your foot slips! You try to grab onto something, but there's nothing to hold.</p>
        <p><strong>ğŸ’€ Game Over! You fell into the ravine.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "join_travelers")
{
    <div>
        <h4>ğŸ‘¥ Fellowship Found</h4>
        <p>You step out and greet the travelers warmly. They turn out to be experienced treasure hunters who have been searching these woods for months!</p>
        <p>They're impressed by your courage to venture alone and invite you to join their expedition. With their knowledge and your determination, you all work together.</p>
        <p>The group's combined skills lead you to a secret passage they'd been searching for. Inside, you find the legendary treasure!</p>
        <p><strong>ğŸ† Victory! Teamwork made the dream work!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "sneak_past")
{
    <div>
        <h4>ğŸ¤« Silent Steps</h4>
        <p>You crouch low and quietly move past the camp. You're almost clear when you step on a dry branchâ€”CRACK!</p>
        <p>The travelers hear you! "Hey, wait!" they call out. But you're already running. In your haste, you lose your bearings and get turned around in the forest.</p>
        <p>Hours later, you find yourself back at the stream, exhausted and no closer to the treasure.</p>
        <p><strong>ğŸ˜ Loss: You made it home safely but found nothing.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "observe_travelers")
{
    <div>
        <h4>ğŸ‘ï¸ Patient Observation</h4>
        <p>You stay hidden and watch the travelers. They're studying a map and discussing locations. You overhear them mention "the old oak tree with three trunks" as a landmark.</p>
        <p>After they pack up and leave in another direction, you remember seeing such a tree on your journey! You head toward it with renewed purpose.</p>
        <button @onclick='() => MakeChoice("three_trunk_oak")' class="choice-btn">Find the three-trunk oak tree</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "crystal_caves")
{
    <div>
        <h4>ğŸ’ Glittering Depths</h4>
        <p>You enter the Crystal Caves. The walls sparkle with thousands of embedded crystals, creating a breathtaking light show.</p>
        <p>Deep in the caves, you discover that the crystals form a natural compass, pointing toward strong magical sources. Following their guidance, you navigate to a hidden chamber containing the treasure!</p>
        <p><strong>ğŸ† Victory! The crystals lit your way to fortune!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "ancient_ruins")
{
    <div>
        <h4>ğŸ›ï¸ Forgotten Temple</h4>
        <p>You arrive at the Ancient Ruins. Crumbling stone pillars and moss-covered walls tell of a civilization long past.</p>
        <p>As you explore, you accidentally trigger a trap! Arrows shoot from the walls, and you barely dodge them. However, one grazes your arm, and you realize too late that they were poisoned.</p>
        <p><strong>ğŸ’€ Game Over! The ancient defenses still worked after all these years.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "enter_cave")
{
    <div>
        <h4>ğŸ¦‡ The Hidden Cave</h4>
        <p>You carefully enter the dark cave. Your eyes adjust, and you see ancient markings on the walls. This must be an old sanctuary!</p>
        <p>As you venture deeper, you find a small underground spring. Drinking from it clears your mind, and suddenly you can sense the treasure's location!</p>
        <p>You follow the sensation through a series of tunnels and emerge in a sacred grove where the treasure has been protected for centuries.</p>
        <p><strong>ğŸ† Victory! The sacred waters guided your path!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "continue_down")
{
    <div>
        <h4>â¬‡ï¸ The Long Climb</h4>
        <p>You decide not to explore the cave and continue your descent. The climb is exhausting, and by the time you reach the bottom, you're too tired to continue safely.</p>
        <p>You set up camp at the ravine floor for the night. In the morning, you realize you're deep in the ravine with no clear path to the treasure.</p>
        <p><strong>ğŸ˜ Loss: You survived but couldn't complete your quest.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "three_trunk_oak")
{
    <div>
        <h4>ğŸŒ³ The Legendary Oak</h4>
        <p>You find the massive oak tree with three trunks twisted together. At its base, you notice fresh digging marks.</p>
        <p>You dig carefully and discover a hidden entrance to an underground vault. Inside lies the treasure, along with a note: "To the one patient enough to listen and learn."</p>
        <p><strong>ğŸ† Victory! Your patience and observation paid off!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "mystical_glade")
{
    <div>
        <h4>âœ¨ The Mystical Glade</h4>
        <p>You stumble upon a beautiful glade where the air shimmers with magic. In the center stands a stone altar with three colored orbs: red, blue, and green.</p>
        <p>An ethereal voice whispers: "Choose wisely, for only one path leads to truth."</p>
        <button @onclick='() => MakeChoice("touch_red_orb")' class="choice-btn">Touch the red orb (warmth emanates from it)</button>
        <button @onclick='() => MakeChoice("touch_blue_orb")' class="choice-btn">Touch the blue orb (cool and calming)</button>
        <button @onclick='() => MakeChoice("touch_green_orb")' class="choice-btn">Touch the green orb (pulses with life)</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "touch_red_orb")
{
    <div>
        <h4>ğŸ”¥ Trial of Fire</h4>
        <p>The red orb blazes to life! A ring of fire surrounds you, testing your courage. You must walk through the flames to prove your worth.</p>
        <p>As you step forward bravely, the flames part around you, recognizing your courage. Beyond the flames, you find a chest containing the treasure!</p>
        <p><strong>ğŸ† Victory! Your courage was rewarded!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "touch_blue_orb")
{
    <div>
        <h4>â„ï¸ Trial of Wisdom</h4>
        <p>The blue orb glows softly. A spectral figure appears and asks: "What is more valuable than gold, more precious than gems, yet costs nothing to give?"</p>
        <button @onclick='() => MakeChoice("answer_love")' class="choice-btn">Love</button>
        <button @onclick='() => MakeChoice("answer_knowledge")' class="choice-btn">Knowledge</button>
        <button @onclick='() => MakeChoice("answer_time")' class="choice-btn">Time</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "touch_green_orb")
{
    <div>
        <h4>ğŸŒ¿ Trial of Nature</h4>
        <p>The green orb bursts with life energy! Vines sprout from the ground, creating a living maze. You must navigate using your connection to nature.</p>
        <p>You close your eyes and feel the life force of the plants, letting them guide you through the maze. They lead you to a secret grove where the treasure awaits!</p>
        <p><strong>ğŸ† Victory! Nature rewarded your harmony!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_love")
{
    <div>
        <h4>ğŸ’ Correct!</h4>
        <p>"Love," the figure smiles. "Indeed. You have a wise heart." The figure reveals a hidden path that leads directly to the treasure chamber.</p>
        <p><strong>ğŸ† Victory! A wise heart found the way!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_knowledge")
{
    <div>
        <h4>ğŸ“š Partial Truth</h4>
        <p>"Knowledge is valuable," the figure says, "but not the answer I seek." The figure fades, leaving you confused. You wander but never find the treasure.</p>
        <p><strong>ğŸ˜ Loss: Close, but wisdom requires more than knowledge.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_time")
{
    <div>
        <h4>â° Not Quite</h4>
        <p>"Time is precious," the figure nods, "but it is not freely givenâ€”it is spent." The riddle remains unsolved, and you must leave empty-handed.</p>
        <p><strong>ğŸ˜ Loss: The answer eluded you.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "enchanted_bridge")
{
    <div>
        <h4>ğŸŒ‰ The Enchanted Bridge</h4>
        <p>You come across an ornate bridge spanning a misty chasm. A troll guardian blocks your way, but he seems friendly.</p>
        <p>"Answer my questions three, and you may pass," he rumbles. "Fail, and you must turn back."</p>
        <button @onclick='() => MakeChoice("accept_troll_challenge")' class="choice-btn">Accept the challenge</button>
        <button @onclick='() => MakeChoice("attempt_troll_bribe")' class="choice-btn">Offer the troll a bribe</button>
        <button @onclick='() => MakeChoice("seek_alternate_route")' class="choice-btn">Look for another way around</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "accept_troll_challenge")
{
    <div>
        <h4>ğŸ² The Troll's Questions</h4>
        <p>The troll grins. "First question: What has hands but cannot clap?"</p>
        <button @onclick='() => MakeChoice("answer_clock")' class="choice-btn">A clock</button>
        <button @onclick='() => MakeChoice("answer_statue")' class="choice-btn">A statue</button>
        <button @onclick='() => MakeChoice("answer_gloves")' class="choice-btn">Gloves</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_clock")
{
    <div>
        <h4>âœ… Question One Passed!</h4>
        <p>"Correct!" the troll nods approvingly. "Second question: I have cities but no houses, forests but no trees, and water but no fish. What am I?"</p>
        <button @onclick='() => MakeChoice("answer_map")' class="choice-btn">A map</button>
        <button @onclick='() => MakeChoice("answer_painting")' class="choice-btn">A painting</button>
        <button @onclick='() => MakeChoice("answer_dream")' class="choice-btn">A dream</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_statue")
{
    <div>
        <h4>âŒ Wrong Answer</h4>
        <p>"Incorrect!" the troll shakes his head. "A statue has no hands at all. You must turn back." You're forced to find another path, but time runs out.</p>
        <p><strong>ğŸ˜ Loss: The riddle stumped you.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_gloves")
{
    <div>
        <h4>âŒ Not Right</h4>
        <p>"No, no," the troll chuckles. "Gloves aren't hands themselves! Try again next time." You must turn back disappointed.</p>
        <p><strong>ğŸ˜ Loss: Better luck next time.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_map")
{
    <div>
        <h4>âœ… Question Two Passed!</h4>
        <p>"Excellent!" the troll beams. "Final question: The more you take, the more you leave behind. What am I?"</p>
        <button @onclick='() => MakeChoice("answer_footsteps")' class="choice-btn">Footsteps</button>
        <button @onclick='() => MakeChoice("answer_memories")' class="choice-btn">Memories</button>
        <button @onclick='() => MakeChoice("answer_breath")' class="choice-btn">Breaths</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_painting")
{
    <div>
        <h4>âŒ Incorrect</h4>
        <p>"Not quite!" the troll says. "A painting doesn't really have cities. You failed the challenge." You must turn back.</p>
        <p><strong>ğŸ˜ Loss: The troll's test was too difficult.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_dream")
{
    <div>
        <h4>âŒ Not the Answer</h4>
        <p>"Interesting guess, but no," the troll shrugs. "Dreams don't have cities in that way. You must leave." Disappointed, you turn back.</p>
        <p><strong>ğŸ˜ Loss: The riddle defeated you.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_footsteps")
{
    <div>
        <h4>ğŸ‰ All Questions Answered!</h4>
        <p>"Perfect! You've answered all three correctly!" the troll steps aside. "You may cross, wise traveler."</p>
        <p>Across the bridge, you find the treasure waiting in a beautiful meadow, guarded by the troll all these years!</p>
        <p><strong>ğŸ† Victory! Your wit earned passage to the treasure!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_memories")
{
    <div>
        <h4>âŒ So Close</h4>
        <p>"Memories are poetic," the troll says, "but not the answer. The correct answer was footsteps!" He blocks your path.</p>
        <p><strong>ğŸ˜ Loss: You were so close to success.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_breath")
{
    <div>
        <h4>âŒ Wrong Choice</h4>
        <p>"No," the troll sighs. "Breaths are taken but not left behind. The answer was footsteps!" You must turn back.</p>
        <p><strong>ğŸ˜ Loss: The final riddle stumped you.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "attempt_troll_bribe")
{
    <div>
        <h4>ğŸ’° The Bribe Attempt</h4>
        <p>You offer the troll your gold coins. He looks offended. "I am a guardian of honor, not a common thief! Leave now!"</p>
        <p>Ashamed, you retreat. You later learn the troll would have let you pass if you'd answered his riddles.</p>
        <p><strong>ğŸ˜ Loss: Attempting bribery was dishonorable.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "seek_alternate_route")
{
    <div>
        <h4>ğŸ” The Search</h4>
        <p>You spend hours searching for another route around the chasm. Eventually, you find a narrow ledge along the cliff face.</p>
        <button @onclick='() => MakeChoice("take_narrow_ledge")' class="choice-btn">Take the narrow ledge</button>
        <button @onclick='() => MakeChoice("give_up_search")' class="choice-btn">Give up and go back</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "take_narrow_ledge")
{
    <div>
        <h4>ğŸ§— The Risky Path</h4>
        <p>You carefully edge along the narrow ledge. One wrong move could mean a fatal fall. Your heart pounds as you inch forward.</p>
        <p>Suddenly, rocks crumble beneath your feet! You grab for a handhold but there's nothing to grip.</p>
        <p><strong>ğŸ’€ Game Over! The ledge was too dangerous.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "give_up_search")
{
    <div>
        <h4>ğŸš¶ Retreat</h4>
        <p>Exhausted from the search, you decide to give up and head home. Sometimes discretion is the better part of valor.</p>
        <p><strong>ğŸ˜ Loss: You couldn't find a way to the treasure.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "mysterious_cave")
{
    <div>
        <h4>ğŸ•³ï¸ The Mysterious Cave</h4>
        <p>You enter a dark cave. As your eyes adjust, you see glowing crystals embedded in the walls, illuminating ancient cave paintings.</p>
        <p>The paintings seem to tell a story about the treasure's location. You also hear water dripping deeper in the cave.</p>
        <button @onclick='() => MakeChoice("study_paintings")' class="choice-btn">Study the cave paintings carefully</button>
        <button @onclick='() => MakeChoice("follow_water_sound")' class="choice-btn">Follow the sound of dripping water</button>
        <button @onclick='() => MakeChoice("collect_crystals")' class="choice-btn">Collect some of the glowing crystals</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "study_paintings")
{
    <div>
        <h4>ğŸ¨ Ancient Wisdom</h4>
        <p>You carefully study the paintings. They show a path through the cave system, marked with specific crystal colors: blue, then green, then red.</p>
        <p>Following this pattern through the tunnels, you navigate safely to a hidden chamber where the treasure has been protected for centuries!</p>
        <p><strong>ğŸ† Victory! The ancient ones left you a map!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "follow_water_sound")
{
    <div>
        <h4>ğŸ’§ Underground River</h4>
        <p>You follow the dripping sound deeper into the cave. It leads you to an underground river. The current is strong, and you see something shiny in the water.</p>
        <button @onclick='() => MakeChoice("dive_for_shiny")' class="choice-btn">Dive in to grab the shiny object</button>
        <button @onclick='() => MakeChoice("follow_river_bank")' class="choice-btn">Follow the river bank</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "collect_crystals")
{
    <div>
        <h4>ğŸ’ Greedy Choice</h4>
        <p>You start prying crystals from the walls. Suddenly, the cave begins to shake! Removing the crystals has destabilized the cave structure.</p>
        <p>Rocks fall from the ceiling and you barely escape with your life, but you're trapped far from the treasure.</p>
        <p><strong>ğŸ˜ Loss: Greed led to danger and failure.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "dive_for_shiny")
{
    <div>
        <h4>ğŸŒŠ Swept Away</h4>
        <p>You dive into the underground river, but the current is far stronger than you anticipated! The shiny object was just fool's gold.</p>
        <p>The river sweeps you through dark tunnels. By the time you escape, you're miles away from the treasure location.</p>
        <p><strong>ğŸ˜ Loss: The river's power was underestimated.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "follow_river_bank")
{
    <div>
        <h4>ğŸï¸ The Safe Path</h4>
        <p>You wisely follow the river bank instead of diving in. The river leads you through a series of caves to a magnificent underground chamber.</p>
        <p>There, on an island in the middle of a clear pool, sits the treasure chest! A natural stone bridge provides safe access.</p>
        <p><strong>ğŸ† Victory! Patience and caution led you to fortune!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "path_north")
{
    <div>
        <h4>ğŸ§­ The Northern Trail</h4>
        <p>You decide to explore a fourth path that leads north, away from the main forest. The path is overgrown and rarely traveled.</p>
        <p>After walking for an hour, you reach a fork where three different trails diverge. A weathered signpost has fallen, but you can still make out partial words: "...danger", "...safe", and "...magic".</p>
        <button @onclick='() => MakeChoice("danger_path")' class="choice-btn">Take the path marked "danger"</button>
        <button @onclick='() => MakeChoice("safe_path")' class="choice-btn">Take the path marked "safe"</button>
        <button @onclick='() => MakeChoice("magic_path")' class="choice-btn">Take the path marked "magic"</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "danger_path")
{
    <div>
        <h4>âš ï¸ The Dangerous Trail</h4>
        <p>Living up to its name, the path becomes treacherous. You encounter a rope bridge over a chasm, swaying violently in the wind.</p>
        <p>Across the bridge, you see what appears to be a guardian statue. Beyond it, you spot a glimmer of gold!</p>
        <button @onclick='() => MakeChoice("brave_bridge")' class="choice-btn">Cross the bridge carefully</button>
        <button @onclick='() => MakeChoice("find_alternate")' class="choice-btn">Search for an alternate route</button>
        <button @onclick='() => MakeChoice("use_rope_magic")' class="choice-btn">Try to stabilize the bridge with rope techniques</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "brave_bridge")
{
    <div>
        <h4>ğŸŒ‰ Steady Steps</h4>
        <p>You take a deep breath and step onto the swaying bridge. Each plank creaks under your weight, but you maintain your balance.</p>
        <p>Halfway across, a strong gust of wind hits! You grab the rope sides tightly and hold on until the wind passes.</p>
        <p>You successfully cross and approach the guardian statue. It comes to life! "Answer correctly: What runs but never walks?"</p>
        <button @onclick='() => MakeChoice("answer_river")' class="choice-btn">A river</button>
        <button @onclick='() => MakeChoice("answer_time2")' class="choice-btn">Time</button>
        <button @onclick='() => MakeChoice("answer_nose")' class="choice-btn">Your nose</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_river")
{
    <div>
        <h4>âœ… Wise Answer!</h4>
        <p>"Correct!" the statue rumbles. "A river runs but never walks. You may pass."</p>
        <p>The statue steps aside, revealing the treasure chamber! You've found the legendary treasure!</p>
        <p><strong>ğŸ† Victory! Your wisdom earned you the treasure!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_time2")
{
    <div>
        <h4>âŒ Incorrect</h4>
        <p>"Time flows, but it does not run in the physical sense," the statue says. "You may not pass."</p>
        <p>The statue blocks your way, and you must retreat empty-handed.</p>
        <p><strong>ğŸ˜ Loss: The riddle defeated you.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_nose")
{
    <div>
        <h4>âŒ Wrong Answer</h4>
        <p>"Humorous, but incorrect," the statue says. The statue remains immovable, and you cannot reach the treasure.</p>
        <p><strong>ğŸ˜ Loss: Better luck next time.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "find_alternate")
{
    <div>
        <h4>ğŸ” The Search for Safety</h4>
        <p>You decide the bridge is too risky and search for another way. After hours of exploring, you find a narrow mountain path.</p>
        <p>The path leads you higher and higher. You come across an eagle's nest with three giant eggs. The mother eagle eyes you warily.</p>
        <button @onclick='() => MakeChoice("respect_eagle")' class="choice-btn">Show respect and move quietly past</button>
        <button @onclick='() => MakeChoice("take_egg")' class="choice-btn">Take an egg (might be valuable)</button>
        <button @onclick='() => MakeChoice("feed_eagle")' class="choice-btn">Offer the eagle some food</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "respect_eagle")
{
    <div>
        <h4>ğŸ¦… Mutual Respect</h4>
        <p>You bow slightly to the eagle and move carefully past the nest. The eagle watches but doesn't attack.</p>
        <p>Beyond the nest, the path leads to a secret mountain shrine where treasure has been kept safe for centuries!</p>
        <p><strong>ğŸ† Victory! Respect for nature led you to fortune!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "take_egg")
{
    <div>
        <h4>ğŸª¶ Mistake!</h4>
        <p>As soon as you reach for an egg, the mother eagle shrieks and attacks! Her talons are razor sharp.</p>
        <p>You try to defend yourself, but the eagle is protecting her young with fierce determination.</p>
        <p><strong>ğŸ’€ Game Over! Never steal from a mother's nest.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "feed_eagle")
{
    <div>
        <h4>ğŸ¦… A New Ally</h4>
        <p>You offer the eagle some dried meat. She accepts it gratefully and even allows you to pet her.</p>
        <p>As a gift, the eagle picks up a shiny object and drops it in your handsâ€”a magical amulet that points toward treasure!</p>
        <p>Following the amulet's guidance, you easily navigate to the treasure's location!</p>
        <p><strong>ğŸ† Victory! Kindness to creatures brings rewards!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "use_rope_magic")
{
    <div>
        <h4>ğŸª¢ Clever Engineering</h4>
        <p>Using your knowledge of knots and rope techniques, you stabilize the bridge by adding support lines.</p>
        <p>The bridge becomes much safer, and you cross easily. However, the process takes several hours.</p>
        <p>When you reach the other side, night has fallen. You see campfire light in the distance.</p>
        <button @onclick='() => MakeChoice("approach_campfire")' class="choice-btn">Approach the campfire</button>
        <button @onclick='() => MakeChoice("camp_alone")' class="choice-btn">Make your own camp</button>
        <button @onclick='() => MakeChoice("night_explore")' class="choice-btn">Continue exploring despite the darkness</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "approach_campfire")
{
    <div>
        <h4>ğŸ”¥ Friendly Faces</h4>
        <p>You approach the campfire and find a group of friendly monks on a pilgrimage. They offer you food and shelter.</p>
        <p>In the morning, one monk reveals they know the location of the treasureâ€”it's their sacred duty to protect it. Impressed by your honorable approach, they grant you access!</p>
        <p><strong>ğŸ† Victory! Trust and friendship led you to the treasure!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "camp_alone")
{
    <div>
        <h4>â›º Solitary Night</h4>
        <p>You set up your own camp and rest. During the night, you hear strange howling sounds that keep you awake.</p>
        <p>In the morning, you're exhausted and realize you've lost your sense of direction. You wander but never find the treasure.</p>
        <p><strong>ğŸ˜ Loss: Sometimes accepting help is wiser than going alone.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "night_explore")
{
    <div>
        <h4>ğŸŒ™ Night Wanderer</h4>
        <p>You continue exploring in the darkness. The forest at night is alive with strange sounds and glowing eyes.</p>
        <p>You stumble into a patch of quicksand hidden in the shadows! You struggle but sink deeper.</p>
        <p><strong>ğŸ’€ Game Over! The night hides many dangers.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "safe_path")
{
    <div>
        <h4>ğŸ›¤ï¸ The Safe Route</h4>
        <p>The path marked "safe" is well-maintained and easy to walk. Soon you arrive at a beautiful meadow with flowers everywhere.</p>
        <p>In the center of the meadow stands a magnificent tree with golden leaves. At its base, you see three doors embedded in the trunk.</p>
        <p>Each door has a symbol: a sun â˜€ï¸, a moon ğŸŒ™, and a star â­.</p>
        <button @onclick='() => MakeChoice("sun_door")' class="choice-btn">Enter the sun door</button>
        <button @onclick='() => MakeChoice("moon_door")' class="choice-btn">Enter the moon door</button>
        <button @onclick='() => MakeChoice("star_door")' class="choice-btn">Enter the star door</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "sun_door")
{
    <div>
        <h4>â˜€ï¸ Chamber of Light</h4>
        <p>You step through the sun door and enter a chamber filled with brilliant light. The warmth is comforting.</p>
        <p>In the center, a being made of pure light appears. "You have chosen the path of day, of openness and honesty. The treasure belongs to such a heart."</p>
        <p>The being guides you to a hidden alcove where the legendary treasure awaits!</p>
        <p><strong>ğŸ† Victory! The light reveals all truths!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "moon_door")
{
    <div>
        <h4>ğŸŒ™ Chamber of Shadows</h4>
        <p>You enter through the moon door into a dimly lit chamber. Shadows dance on the walls, and you feel uneasy.</p>
        <p>A shadow creature materializes. "You chose the path of night, of secrets and mystery. But can you handle what you find?"</p>
        <p>The creature shows you visions of the treasure's dark historyâ€”all who sought it with greed met terrible fates.</p>
        <button @onclick='() => MakeChoice("accept_warning")' class="choice-btn">Accept the warning and leave</button>
        <button @onclick='() => MakeChoice("persist_treasure")' class="choice-btn">Insist you seek it for noble reasons</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "accept_warning")
{
    <div>
        <h4>ğŸš¶ Wisdom in Retreat</h4>
        <p>You thank the shadow creature for the warning and turn back. As you leave, the creature speaks: "Your wisdom in knowing when to stop is the true treasure."</p>
        <p>A golden light appears in your handâ€”a magical coin that will bring prosperity wherever you go!</p>
        <p><strong>ğŸ† Victory! Sometimes the treasure is the journey itself!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "persist_treasure")
{
    <div>
        <h4>ğŸ’° Pure Intentions</h4>
        <p>You explain that you seek the treasure not for greed, but to help your village. The shadow creature studies you carefully.</p>
        <p>"I see truth in your words," it finally says. "Very well. The treasure is yoursâ€”use it wisely."</p>
        <p>The shadows part, revealing the treasure chamber!</p>
        <p><strong>ğŸ† Victory! Pure intentions earned you the reward!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "star_door")
{
    <div>
        <h4>â­ Chamber of Destiny</h4>
        <p>You enter the star door and find yourself in a circular room with a domed ceiling showing constellations.</p>
        <p>An ancient astrologer appears. "The stars have foretold your coming. But your destiny is not yet written."</p>
        <p>She offers you three scrolls, each containing a different prophecy.</p>
        <button @onclick='() => MakeChoice("wealth_scroll")' class="choice-btn">Read the scroll of wealth</button>
        <button @onclick='() => MakeChoice("wisdom_scroll")' class="choice-btn">Read the scroll of wisdom</button>
        <button @onclick='() => MakeChoice("adventure_scroll")' class="choice-btn">Read the scroll of adventure</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "wealth_scroll")
{
    <div>
        <h4>ğŸ’ Prosperity Awaits</h4>
        <p>You read the scroll of wealth. It glows golden and transforms into a map showing the exact location of the treasure!</p>
        <p>Following the map, you navigate directly to the treasure chamber and claim your prize!</p>
        <p><strong>ğŸ† Victory! The stars aligned for your fortune!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "wisdom_scroll")
{
    <div>
        <h4>ğŸ“œ Knowledge Unfolds</h4>
        <p>You read the scroll of wisdom. It reveals ancient knowledge about the forest and its treasures.</p>
        <p>While you don't find the specific treasure you sought, you gain something more valuableâ€”the wisdom to create your own fortune through knowledge!</p>
        <p><strong>ğŸ† Victory! Wisdom is the greatest treasure!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "adventure_scroll")
{
    <div>
        <h4>ğŸ—ºï¸ New Beginnings</h4>
        <p>You read the scroll of adventure. It shows you countless paths and possibilities beyond this forest.</p>
        <p>You realize the treasure hunt was just the beginning. With new confidence, you set out to explore the wider world!</p>
        <p>Years later, you return as a legendary adventurer, having found treasures beyond imagination!</p>
        <p><strong>ğŸ† Victory! The adventure is the real treasure!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "magic_path")
{
    <div>
        <h4>âœ¨ The Magical Trail</h4>
        <p>The magic path glows with ethereal light. As you walk, you notice the trees themselves seem alive and aware.</p>
        <p>You come to a clearing where a unicorn stands beside a crystal fountain. The unicorn speaks telepathically: "Only the pure may drink from this fountain."</p>
        <button @onclick='() => MakeChoice("drink_fountain")' class="choice-btn">Drink from the fountain</button>
        <button @onclick='() => MakeChoice("pet_unicorn")' class="choice-btn">Approach the unicorn gently</button>
        <button @onclick='() => MakeChoice("examine_crystals")' class="choice-btn">Examine the crystal fountain</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "drink_fountain")
{
    <div>
        <h4>ğŸ’§ Pure Waters</h4>
        <p>You cup your hands and drink from the crystal fountain. The water tastes like starlight and dreams.</p>
        <p>The unicorn nods approvingly. "Your heart is pure. The treasure you seek is not far."</p>
        <p>With the unicorn's blessing, you gain the ability to see magical pathways. Following them, you easily reach the treasure!</p>
        <p><strong>ğŸ† Victory! Purity of heart opens all doors!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "pet_unicorn")
{
    <div>
        <h4>ğŸ¦„ Mystical Bond</h4>
        <p>You slowly approach the unicorn with an open hand. The unicorn allows you to touch its shimmering mane.</p>
        <p>A vision floods your mindâ€”you see the exact location of the treasure! The unicorn has shared its knowledge with you.</p>
        <p>Following the vision, you journey to the treasure chamber and claim your reward!</p>
        <p><strong>ğŸ† Victory! The unicorn chose to help you!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "examine_crystals")
{
    <div>
        <h4>ğŸ’ Crystal Study</h4>
        <p>You examine the crystals making up the fountain. They're unlike anything you've seenâ€”each one contains miniature worlds.</p>
        <p>As you study them, one crystal resonates with your touch. It breaks free and floats into your hand.</p>
        <p>The unicorn speaks: "That crystal has chosen you. It will guide you to what you truly seek."</p>
        <p>The crystal leads you through magical shortcuts directly to the treasure!</p>
        <p><strong>ğŸ† Victory! Magic recognized your curious spirit!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "eastern_path")
{
    <div>
        <h4>ğŸŒ… The Eastern Trail</h4>
        <p>You take a lesser-known eastern path that winds along a cliff face. The view is breathtakingâ€”you can see the entire forest below.</p>
        <p>You discover an abandoned watchtower. Inside, you find old maps and equipment from previous treasure hunters.</p>
        <button @onclick='() => MakeChoice("study_maps")' class="choice-btn">Study the old maps carefully</button>
        <button @onclick='() => MakeChoice("take_equipment")' class="choice-btn">Take some of the equipment</button>
        <button @onclick='() => MakeChoice("rest_in_tower")' class="choice-btn">Rest in the tower for the night</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "study_maps")
{
    <div>
        <h4>ğŸ—ºï¸ Ancient Knowledge</h4>
        <p>You spend hours studying the maps. They're incredibly detailed, showing secret passages and hidden landmarks.</p>
        <p>You find three particularly interesting maps: one shows a coastal route, another depicts mountain passes, and the third reveals underground tunnels.</p>
        <button @onclick='() => MakeChoice("coastal_route_map")' class="choice-btn">Follow the coastal route map</button>
        <button @onclick='() => MakeChoice("mountain_pass_map")' class="choice-btn">Take the mountain passes route</button>
        <button @onclick='() => MakeChoice("underground_tunnel_map")' class="choice-btn">Explore the underground tunnels</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "coastal_route_map")
{
    <div>
        <h4>ğŸŒŠ Coastal Journey</h4>
        <p>Following the coastal map, you travel east until you reach the sea. The map shows a shipwreck that supposedly contains clues.</p>
        <p>You find the wreck half-buried in sand. Inside, you discover a captain's log and a mysterious sealed bottle.</p>
        <button @onclick='() => MakeChoice("read_log")' class="choice-btn">Read the captain's log</button>
        <button @onclick='() => MakeChoice("open_bottle")' class="choice-btn">Open the sealed bottle</button>
        <button @onclick='() => MakeChoice("search_wreck")' class="choice-btn">Search the wreck thoroughly</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "read_log")
{
    <div>
        <h4>ğŸ“– Captain's Tale</h4>
        <p>The log reveals the captain was transporting treasure when the ship wrecked. He buried it on a nearby island before dying.</p>
        <p>The log includes directions: "From the wreck, swim north to the island with twin palms."</p>
        <p>You spot an island in the distance with two palm trees!</p>
        <button @onclick='() => MakeChoice("swim_to_island")' class="choice-btn">Swim to the island</button>
        <button @onclick='() => MakeChoice("build_raft")' class="choice-btn">Build a raft first</button>
        <button @onclick='() => MakeChoice("search_for_boat")' class="choice-btn">Search the coast for a boat</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "swim_to_island")
{
    <div>
        <h4>ğŸŠ Bold Swimmer</h4>
        <p>You dive into the water and swim toward the island. The current is strong but manageable.</p>
        <p>You reach the island and find the twin palms. Digging beneath them, you uncover the captain's treasure chest!</p>
        <p><strong>ğŸ† Victory! Your courage in the water paid off!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "build_raft")
{
    <div>
        <h4>ğŸªµ Craftsmanship</h4>
        <p>You gather driftwood and vines to construct a raft. It takes time but you create a sturdy vessel.</p>
        <p>The raft carries you safely to the island. Your patience and skill are rewarded when you find the treasure!</p>
        <p><strong>ğŸ† Victory! Preparation prevents peril!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "search_for_boat")
{
    <div>
        <h4>ğŸš£ Lucky Find</h4>
        <p>You search the coastline and find an old rowboat hidden in a cove. It's still seaworthy!</p>
        <p>Rowing to the island, you easily locate and claim the treasure beneath the twin palms.</p>
        <p><strong>ğŸ† Victory! Thorough searching revealed a perfect solution!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "open_bottle")
{
    <div>
        <h4>ğŸ’Œ Message in a Bottle</h4>
        <p>You break the seal and pull out a waterlogged note. It reads: "Beware the sirens' call. The treasure lies where they cannot reach."</p>
        <p>You hear beautiful singing from the rocks offshore. It's mesmerizing...</p>
        <button @onclick='() => MakeChoice("resist_singing")' class="choice-btn">Resist the singing and investigate</button>
        <button @onclick='() => MakeChoice("follow_singing")' class="choice-btn">Follow the singing</button>
        <button @onclick='() => MakeChoice("plug_ears")' class="choice-btn">Plug your ears and avoid it</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "resist_singing")
{
    <div>
        <h4>ğŸ’ª Strong Will</h4>
        <p>You resist the siren song through sheer willpower. The singing fades, revealing it was a magical test!</p>
        <p>A sea spirit appears, impressed by your resistance. She reveals the treasure is in an underwater cave, protected from sirens.</p>
        <p>She grants you the ability to breathe underwater temporarily. You dive down and claim the treasure!</p>
        <p><strong>ğŸ† Victory! Willpower conquered temptation!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "follow_singing")
{
    <div>
        <h4>ğŸµ Entranced</h4>
        <p>The singing is too beautiful to resist. You walk into the water toward the rocks...</p>
        <p>The "sirens" were actually dangerous creatures luring you to your doom!</p>
        <p><strong>ğŸ’€ Game Over! The siren song was deadly.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "plug_ears")
{
    <div>
        <h4>ğŸ™‰ Wise Precaution</h4>
        <p>You tear cloth and plug your ears, remembering the warning. The visual of the singing rocks no longer affects you.</p>
        <p>You safely explore the area and find a hidden beach cave where the treasure was stored, away from the sirens!</p>
        <p><strong>ğŸ† Victory! Heeding warnings saved you!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "search_wreck")
{
    <div>
        <h4>ğŸ” Thorough Investigation</h4>
        <p>You methodically search every corner of the wreck. In the cargo hold, you find crates marked with treasure symbols!</p>
        <p>Most are empty, but one contains gold coins and jewelsâ€”the treasure was here all along!</p>
        <p><strong>ğŸ† Victory! Thoroughness paid off!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "mountain_pass_map")
{
    <div>
        <h4>â›°ï¸ Highland Route</h4>
        <p>The mountain map leads you to treacherous heights. You reach a fork where the path splits three ways.</p>
        <p>Signs indicate: "Summit Trail", "Valley Pass", and "Ridge Walk"</p>
        <button @onclick='() => MakeChoice("summit_trail")' class="choice-btn">Take the summit trail</button>
        <button @onclick='() => MakeChoice("valley_pass")' class="choice-btn">Go through the valley pass</button>
        <button @onclick='() => MakeChoice("ridge_walk")' class="choice-btn">Walk along the ridge</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "summit_trail")
{
    <div>
        <h4>ğŸ”ï¸ To the Peak</h4>
        <p>You climb to the mountain summit. The view is incredible! From here, you can see the entire region.</p>
        <p>You spot a hidden valley below with ancient ruins. That must be where the treasure is!</p>
        <button @onclick='() => MakeChoice("descend_to_ruins")' class="choice-btn">Descend to the ruins</button>
        <button @onclick='() => MakeChoice("use_telescope")' class="choice-btn">Use the summit telescope first</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "descend_to_ruins")
{
    <div>
        <h4>ğŸ›ï¸ Ancient Ruins</h4>
        <p>You carefully descend to the hidden valley. The ruins are magnificentâ€”a lost civilization!</p>
        <p>In the central temple, you find the treasure chamber, preserved for millennia.</p>
        <p><strong>ğŸ† Victory! The height gave you the perspective you needed!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "use_telescope")
{
    <div>
        <h4>ğŸ”­ Clear Vision</h4>
        <p>You find an old telescope at the summit and look through it. You can see incredible detail!</p>
        <p>You spot not just the ruins, but also the exact entrance to the treasure chamber. This saves hours of searching.</p>
        <p>With this knowledge, you descend and go directly to the treasure!</p>
        <p><strong>ğŸ† Victory! Observation before action leads to efficiency!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "valley_pass")
{
    <div>
        <h4>ğŸŒ„ Through the Valley</h4>
        <p>The valley pass is easier but longer. You encounter a mountain shepherd who knows these paths well.</p>
        <p>He offers to guide you for a price, or you can continue alone.</p>
        <button @onclick='() => MakeChoice("hire_shepherd")' class="choice-btn">Hire the shepherd as a guide</button>
        <button @onclick='() => MakeChoice("continue_alone_valley")' class="choice-btn">Continue alone</button>
        <button @onclick='() => MakeChoice("trade_with_shepherd")' class="choice-btn">Trade goods instead of paying</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "hire_shepherd")
{
    <div>
        <h4>ğŸ‘ Expert Guide</h4>
        <p>The shepherd knows secret shortcuts and safe paths. He leads you directly to a cave system.</p>
        <p>"The treasure lies within," he says. "I've known for years but never dared enter."</p>
        <p>You enter and find the treasure! Your investment in a guide was wise.</p>
        <p><strong>ğŸ† Victory! Local knowledge is invaluable!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "continue_alone_valley")
{
    <div>
        <h4>ğŸ¥¾ Solo Journey</h4>
        <p>You press on alone. The valley is beautiful but confusingâ€”many paths look similar.</p>
        <p>After hours of wandering, you realize you're lost. The treasure remains unfound.</p>
        <p><strong>ğŸ˜ Loss: Pride prevented you from accepting help.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "trade_with_shepherd")
{
    <div>
        <h4>ğŸ¤ Fair Trade</h4>
        <p>You offer the shepherd some of your supplies in trade. He accepts happily!</p>
        <p>"I appreciate a trader," he says, and leads you via secret paths to the treasure cave.</p>
        <p><strong>ğŸ† Victory! Creative solutions work wonders!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "ridge_walk")
{
    <div>
        <h4>ğŸŒ¬ï¸ Narrow Path</h4>
        <p>The ridge is narrow with steep drops on both sides. The wind is strong.</p>
        <p>Halfway across, you must choose: push forward through strong wind, or find shelter and wait.</p>
        <button @onclick='() => MakeChoice("push_through_wind")' class="choice-btn">Push through the wind</button>
        <button @onclick='() => MakeChoice("wait_for_calm")' class="choice-btn">Wait for the wind to calm</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "push_through_wind")
{
    <div>
        <h4>ğŸ’¨ Fighting the Elements</h4>
        <p>You lower your stance and push through the powerful wind. It's exhausting but you make progress.</p>
        <p>A sudden gust catches you off-balance. You slip and fall!</p>
        <p><strong>ğŸ’€ Game Over! Nature's power was too great.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "wait_for_calm")
{
    <div>
        <h4>â° Patient Wisdom</h4>
        <p>You find a sheltered nook and wait. After an hour, the wind dies down to a gentle breeze.</p>
        <p>You easily complete the ridge walk and find a mountain monastery on the other side. The monks there have been guarding the treasureâ€”and they welcome patient travelers!</p>
        <p><strong>ğŸ† Victory! Patience defeats impatience every time!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "underground_tunnel_map")
{
    <div>
        <h4>ğŸ•³ï¸ Subterranean Route</h4>
        <p>The tunnel map shows an extensive underground network. You find the entrance hidden behind vines.</p>
        <p>Inside, you have three tunnel options, each marked with ancient symbols: a flame, a drop of water, and a leaf.</p>
        <button @onclick='() => MakeChoice("flame_tunnel")' class="choice-btn">Follow the flame symbol tunnel</button>
        <button @onclick='() => MakeChoice("water_tunnel")' class="choice-btn">Follow the water symbol tunnel</button>
        <button @onclick='() => MakeChoice("leaf_tunnel")' class="choice-btn">Follow the leaf symbol tunnel</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "flame_tunnel")
{
    <div>
        <h4>ğŸ”¥ Fire Path</h4>
        <p>The flame tunnel grows warmer as you descend. You reach a chamber with a pool of lava and a stone bridge.</p>
        <p>Ancient guardians made of stone stand on either side of the bridge.</p>
        <button @onclick='() => MakeChoice("speak_to_guardians")' class="choice-btn">Speak to the guardians</button>
        <button @onclick='() => MakeChoice("sneak_past_guardians")' class="choice-btn">Try to sneak past</button>
        <button @onclick='() => MakeChoice("show_respect")' class="choice-btn">Show respect by bowing</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "speak_to_guardians")
{
    <div>
        <h4>ğŸ—£ï¸ Guardian Dialogue</h4>
        <p>You speak to the guardians. They come to life! "State your purpose," they rumble.</p>
        <p>You honestly explain you seek the treasure for worthy reasons.</p>
        <p>"Honesty," they say. "You may pass." The bridge solidifies and you cross to find the treasure chamber!</p>
        <p><strong>ğŸ† Victory! Honest communication opened the way!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "sneak_past_guardians")
{
    <div>
        <h4>ğŸ‘£ Stealth Attempt</h4>
        <p>You try to sneak past the stone guardians, but they detect your movement!</p>
        <p>"Deception!" they roar, and push you toward the lava!</p>
        <p><strong>ğŸ’€ Game Over! Guardians don't appreciate sneakiness.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "show_respect")
{
    <div>
        <h4>ğŸ™‡ Respectful Approach</h4>
        <p>You bow deeply to the guardians. They appreciate the gesture!</p>
        <p>"Respect for the old ways," they say approvingly. "Pass, and take what you seek."</p>
        <p>You cross the bridge and claim the treasure!</p>
        <p><strong>ğŸ† Victory! Respect for guardians earned their favor!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "water_tunnel")
{
    <div>
        <h4>ğŸ’§ Aquatic Path</h4>
        <p>The water tunnel leads to an underground lake. The water glows with bioluminescent algae.</p>
        <p>Across the lake, you see an island with a structure. The water looks deep.</p>
        <button @onclick='() => MakeChoice("swim_underground_lake")' class="choice-btn">Swim across the lake</button>
        <button @onclick='() => MakeChoice("find_boat_underground")' class="choice-btn">Look for a boat</button>
        <button @onclick='() => MakeChoice("walk_around_lake")' class="choice-btn">Walk around the lake edge</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "swim_underground_lake")
{
    <div>
        <h4>ğŸŠ Underground Swim</h4>
        <p>You dive into the glowing water. It's refreshingly cool. You swim steadily toward the island.</p>
        <p>The island structure contains the treasure vault! Your courage to swim paid off.</p>
        <p><strong>ğŸ† Victory! Direct action sometimes works best!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "find_boat_underground")
{
    <div>
        <h4>â›µ Underground Vessel</h4>
        <p>You search the shore and find an ancient stone boat! Amazingly, it's enchanted to float.</p>
        <p>The boat carries you smoothly to the island. This was clearly the intended route!</p>
        <p>You claim the treasure easily.</p>
        <p><strong>ğŸ† Victory! Looking for tools before acting is wise!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "walk_around_lake")
{
    <div>
        <h4>ğŸš¶ Circumnavigation</h4>
        <p>You follow the lake shore, looking for a land bridge. The path becomes treacherous and slippery.</p>
        <p>You slip on wet rocks and fall, hitting your head. When you wake, you're lost in the tunnels.</p>
        <p><strong>ğŸ˜ Loss: The long way around wasn't the right choice.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "leaf_tunnel")
{
    <div>
        <h4>ğŸƒ Nature's Path</h4>
        <p>The leaf tunnel is lined with glowing mushrooms and underground plants. It feels alive!</p>
        <p>You reach a massive underground tree with roots everywhere. Carved into it is a door.</p>
        <button @onclick='() => MakeChoice("knock_on_door")' class="choice-btn">Knock on the door</button>
        <button @onclick='() => MakeChoice("examine_tree")' class="choice-btn">Examine the tree first</button>
        <button @onclick='() => MakeChoice("touch_roots")' class="choice-btn">Touch the glowing roots</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "knock_on_door")
{
    <div>
        <h4>ğŸšª Polite Inquiry</h4>
        <p>You knock respectfully on the tree door. It swings open! Inside is a tree spirit.</p>
        <p>"Few remember to knock," she smiles. "Enter and take the treasure with my blessing."</p>
        <p><strong>ğŸ† Victory! Politeness opens doors literally!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "examine_tree")
{
    <div>
        <h4>ğŸ” Careful Study</h4>
        <p>You examine the tree and discover ancient writings on the bark. They're instructions!</p>
        <p>"Touch the eastern root three times, then enter." You follow the instructions.</p>
        <p>The door opens to reveal the treasure chamber!</p>
        <p><strong>ğŸ† Victory! Reading signs and studying paid off!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "touch_roots")
{
    <div>
        <h4>âœ¨ Magical Connection</h4>
        <p>You touch the glowing roots. Energy flows through you! The tree recognizes you as a friend of nature.</p>
        <p>All doors in the tree open, welcoming you. You find the treasure and gain the tree's blessing!</p>
        <p><strong>ğŸ† Victory! Connection with nature brings gifts!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "take_equipment")
{
    <div>
        <h4>âš™ï¸ Borrowed Tools</h4>
        <p>You find rope, a lantern, climbing gear, and an old compass. These tools could be valuable!</p>
        <p>Looking at the compass, it's pointing strongly toward the northeast. You also notice scratches on the lantern that might be a code.</p>
        <button @onclick='() => MakeChoice("follow_compass")' class="choice-btn">Follow the compass northeast</button>
        <button @onclick='() => MakeChoice("decode_lantern")' class="choice-btn">Try to decode the lantern scratches</button>
        <button @onclick='() => MakeChoice("test_climbing_gear")' class="choice-btn">Use the climbing gear on nearby cliffs</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "follow_compass")
{
    <div>
        <h4>ğŸ§­ Magnetic Guidance</h4>
        <p>Following the compass leads you through treacherous terrain. The needle points unerringly toward your goal.</p>
        <p>You arrive at a canyon with a rope bridge. The compass points across.</p>
        <button @onclick='() => MakeChoice("cross_rope_bridge")' class="choice-btn">Cross the rope bridge</button>
        <button @onclick='() => MakeChoice("test_bridge_first")' class="choice-btn">Test the bridge carefully first</button>
        <button @onclick='() => MakeChoice("find_alternate_crossing")' class="choice-btn">Look for another way across</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "cross_rope_bridge")
{
    <div>
        <h4>ğŸŒ‰ Swift Crossing</h4>
        <p>You walk quickly across the rope bridge. Confidence guides your steps.</p>
        <p>On the other side, the compass leads you directly to a cave where the treasure awaits!</p>
        <p><strong>ğŸ† Victory! Trust in your tools and yourself!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "test_bridge_first")
{
    <div>
        <h4>ğŸ”§ Safety Check</h4>
        <p>You test each plank and rope carefully. Good thingâ€”several are rotten!</p>
        <p>You reinforce the weak spots with your rope before crossing safely.</p>
        <p>The treasure is in the cave beyond, and you reach it without incident!</p>
        <p><strong>ğŸ† Victory! Caution prevents disaster!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "find_alternate_crossing")
{
    <div>
        <h4>ğŸ¥¾ The Long Way</h4>
        <p>You search for hours but find no other crossing. When you return to the bridge, it's collapsed!</p>
        <p>You can't reach the treasure now.</p>
        <p><strong>ğŸ˜ Loss: Overthinking cost you the opportunity.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "decode_lantern")
{
    <div>
        <h4>ğŸ”¤ Secret Code</h4>
        <p>You study the scratches carefully. They form coordinates! The numbers point to a specific location.</p>
        <p>Using the tower's own maps, you plot the location and head there directly.</p>
        <p>You find the treasure exactly where the coordinates indicated!</p>
        <p><strong>ğŸ† Victory! Careful observation and decoding won!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "test_climbing_gear")
{
    <div>
        <h4>ğŸ§— Vertical Adventure</h4>
        <p>You use the climbing gear on nearby cliffs. The equipment is excellent quality!</p>
        <p>From the top of the cliff, you spot a hidden plateau. Using your gear, you reach it and discover an ancient treasure cache!</p>
        <p><strong>ğŸ† Victory! Testing equipment led to discovery!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "rest_in_tower")
{
    <div>
        <h4>ğŸ’¤ Fateful Rest</h4>
        <p>You decide to rest in the tower. As evening falls, you hear strange sounds outside.</p>
        <p>Looking out, you see mysterious lights moving in the forest below.</p>
        <button @onclick='() => MakeChoice("investigate_lights")' class="choice-btn">Investigate the lights</button>
        <button @onclick='() => MakeChoice("stay_in_tower_night")' class="choice-btn">Stay safely in the tower</button>
        <button @onclick='() => MakeChoice("signal_lights")' class="choice-btn">Signal the lights from the tower</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "investigate_lights")
{
    <div>
        <h4>ğŸ”¦ Nighttime Exploration</h4>
        <p>You leave the tower and follow the lights. They lead you deeper into the forest.</p>
        <p>The lights are actually magical fireflies! They circle around you and then fly toward a specific tree.</p>
        <button @onclick='() => MakeChoice("follow_fireflies")' class="choice-btn">Follow the fireflies</button>
        <button @onclick='() => MakeChoice("catch_firefly")' class="choice-btn">Try to catch one firefly</button>
        <button @onclick='() => MakeChoice("return_to_tower_scared")' class="choice-btn">Return to the tower</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "follow_fireflies")
{
    <div>
        <h4>âœ¨ Magical Guides</h4>
        <p>The fireflies lead you to a massive hollow tree. Inside, the tree is filled with treasure!</p>
        <p>The fireflies were guardians, showing the way to those who trust them.</p>
        <p><strong>ğŸ† Victory! Trust in magic brought success!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "catch_firefly")
{
    <div>
        <h4>ğŸ¦‹ Bad Idea</h4>
        <p>You try to catch a firefly, but they're magical guardians! They shock you with magic and fly away.</p>
        <p>You're stunned and disoriented. By morning, you can't find your way back to the tower or the treasure.</p>
        <p><strong>ğŸ˜ Loss: Don't try to capture magical beings!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "return_to_tower_scared")
{
    <div>
        <h4>ğŸƒ Lost Opportunity</h4>
        <p>Fear drives you back to the tower. By morning, the lights are gone and the opportunity lost.</p>
        <p><strong>ğŸ˜ Loss: Fear prevented discovery.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "stay_in_tower_night")
{
    <div>
        <h4>ğŸ›ï¸ Safe Night</h4>
        <p>You stay in the tower. As you sleep, you dream of the treasure's locationâ€”a gift from the tower's previous owner!</p>
        <p>In the morning, you follow the dream vision and find the treasure!</p>
        <p><strong>ğŸ† Victory! Safety sometimes brings its own rewards!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "signal_lights")
{
    <div>
        <h4>ğŸ“¡ Communication Attempt</h4>
        <p>You light a signal fire in the tower. The lights in the forest respond by moving toward you!</p>
        <p>A group of forest spirits arrives. "You called respectfully," they say. "We will show you the treasure."</p>
        <p>They guide you to a secret grove where the treasure has been kept!</p>
        <p><strong>ğŸ† Victory! Respectful communication bridged worlds!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "underground_passage")
{
    <div>
        <h4>ğŸ•³ï¸ The Depths Below</h4>
        <p>While exploring, you discover a hidden entrance to underground passages. The air is cool and damp.</p>
        <p>You light a torch and venture deeper. The passages are ancient, carved with mysterious runes.</p>
        <p>You come to a three-way split in the tunnel.</p>
        <button @onclick='() => MakeChoice("left_tunnel")' class="choice-btn">Take the left tunnel (you hear water)</button>
        <button @onclick='() => MakeChoice("center_tunnel")' class="choice-btn">Take the center tunnel (decorated with gems)</button>
        <button @onclick='() => MakeChoice("right_tunnel")' class="choice-btn">Take the right tunnel (you feel warm air)</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "left_tunnel")
{
    <div>
        <h4>ğŸ’§ The Water Way</h4>
        <p>Following the sound of water, you discover an underground lake. Bioluminescent algae light up the cavern in beautiful blues and greens.</p>
        <p>On an island in the middle of the lake, you see a chest! But the water is deep and cold.</p>
        <button @onclick='() => MakeChoice("swim_to_island")' class="choice-btn">Swim to the island</button>
        <button @onclick='() => MakeChoice("build_raft")' class="choice-btn">Build a raft from nearby wood</button>
        <button @onclick='() => MakeChoice("search_for_boat")' class="choice-btn">Search the shore for a boat</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "swim_to_island")
{
    <div>
        <h4>ğŸŠ Brave Swimmer</h4>
        <p>You dive into the cold water and swim toward the island. The distance is greater than it looked!</p>
        <p>Just as your strength begins to fail, friendly creaturesâ€”glowing fishâ€”swim beneath you, giving you something to hold onto.</p>
        <p>They guide you safely to the island where you find the treasure chest!</p>
        <p><strong>ğŸ† Victory! Courage and kindness from unexpected allies!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "build_raft")
{
    <div>
        <h4>ğŸªµ Craftsmanship</h4>
        <p>You gather driftwood and vines to construct a simple raft. It takes time, but your craftsmanship is solid.</p>
        <p>The raft holds your weight perfectly, and you paddle to the island. There, you find not just one treasure, but three chests!</p>
        <p><strong>ğŸ† Victory! Patience and skill earned triple rewards!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "search_for_boat")
{
    <div>
        <h4>â›µ Lucky Find</h4>
        <p>You search along the shore and discover an old rowboat hidden under some rocks. It's weathered but still seaworthy!</p>
        <p>You row to the island and claim the treasure. Inside the chest, you also find a note from a previous adventurer wishing luck to whoever finds it!</p>
        <p><strong>ğŸ† Victory! Thorough exploration pays off!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "center_tunnel")
{
    <div>
        <h4>ğŸ’ The Gem Passage</h4>
        <p>The center tunnel's walls sparkle with embedded gems. It's beautiful, but something feels wrong.</p>
        <p>As you walk deeper, you realize the gems are watching you! They're actually the eyes of stone guardians.</p>
        <p>The guardians awaken! "To pass, you must answer: What is always in front of you but can't be seen?"</p>
        <button @onclick='() => MakeChoice("answer_future")' class="choice-btn">The future</button>
        <button @onclick='() => MakeChoice("answer_air")' class="choice-btn">Air</button>
        <button @onclick='() => MakeChoice("answer_hope")' class="choice-btn">Hope</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_future")
{
    <div>
        <h4>âœ… Correct Answer!</h4>
        <p>"The future," the guardians echo. "You speak truth. Pass, wise one."</p>
        <p>The guardians step aside, revealing a passage to the treasure vault!</p>
        <p><strong>ğŸ† Victory! Wisdom opens the way!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_air")
{
    <div>
        <h4>âŒ Not Quite</h4>
        <p>"Air can be felt," the guardians rumble. "Your answer is incorrect. You may not pass."</p>
        <p>The guardians force you to retreat. The treasure remains out of reach.</p>
        <p><strong>ğŸ˜ Loss: The riddle stumped you.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_hope")
{
    <div>
        <h4>âŒ Poetic But Wrong</h4>
        <p>"Hope is felt in the heart," the guardians say. "But it is not always present. You have failed."</p>
        <p>You must turn back without the treasure.</p>
        <p><strong>ğŸ˜ Loss: Close, but not correct.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "right_tunnel")
{
    <div>
        <h4>ğŸ”¥ The Warm Path</h4>
        <p>You follow the tunnel with warm air. The temperature increases as you go deeper. You start to sweat.</p>
        <p>The tunnel opens into a vast cavern filled with lava flows! Across the lava, you see the treasure chamber.</p>
        <p>There's a series of stepping stones across the lava, but they look unstable. You also notice a lever mechanism nearby.</p>
        <button @onclick='() => MakeChoice("use_stepping_stones")' class="choice-btn">Jump across the stepping stones</button>
        <button @onclick='() => MakeChoice("pull_lever")' class="choice-btn">Pull the lever mechanism</button>
        <button @onclick='() => MakeChoice("look_for_alternative")' class="choice-btn">Search for another way</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "use_stepping_stones")
{
    <div>
        <h4>ğŸª¨ Dangerous Leap</h4>
        <p>You carefully judge the distance and start jumping from stone to stone. The heat is intense!</p>
        <p>Halfway across, a stone crumbles beneath your foot! You leap desperately to the next stone and barely make it.</p>
        <p>Heart pounding, you complete the crossing and reach the treasure chamber!</p>
        <p><strong>ğŸ† Victory! Bravery and quick reflexes saved you!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "pull_lever")
{
    <div>
        <h4>âš™ï¸ Ancient Mechanism</h4>
        <p>You pull the lever. Ancient gears grind to life! A stone bridge slowly extends across the lava.</p>
        <p>The mechanism was designed by the treasure's creators to provide safe passage to the worthy!</p>
        <p>You walk safely across the bridge and claim the treasure!</p>
        <p><strong>ğŸ† Victory! Using your brain instead of brawn!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "look_for_alternative")
{
    <div>
        <h4>ğŸ” Thorough Search</h4>
        <p>You search the cavern walls and discover a hidden side passage. It's narrow but safe.</p>
        <p>The passage leads around the lava flows and emerges directly in the treasure chamber from the side!</p>
        <p>Sometimes the best solution is the one you have to look for.</p>
        <p><strong>ğŸ† Victory! Careful observation wins the day!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "desert_oasis")
{
    <div>
        <h4>ğŸœï¸ The Desert Oasis</h4>
        <p>Following a hidden path, you emerge from the forest into a vast desert. In the distance, you spot an oasis with palm trees.</p>
        <p>As you approach, you see a caravan of traders resting there. They wave at you friendly.</p>
        <button @onclick='() => MakeChoice("join_caravan")' class="choice-btn">Join the caravan traders</button>
        <button @onclick='() => MakeChoice("explore_dunes")' class="choice-btn">Explore the sand dunes alone</button>
        <button @onclick='() => MakeChoice("rest_at_oasis")' class="choice-btn">Rest at the oasis and observe</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "join_caravan")
{
    <div>
        <h4>ğŸª Caravan Company</h4>
        <p>The traders welcome you warmly. They're heading to an ancient city where legends speak of hidden treasures.</p>
        <p>"Join us!" they say. "We know the safe paths through the desert."</p>
        <p>After three days of travel, you reach the ancient city. The traders show you a secret entrance to the treasure vaults!</p>
        <p><strong>ğŸ† Victory! Traveling in good company led you to success!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "explore_dunes")
{
    <div>
        <h4>ğŸœï¸ Dune Wanderer</h4>
        <p>You venture into the dunes alone. The sand shifts beneath your feet with each step.</p>
        <p>After hours of walking, a sandstorm suddenly appears! The winds are fierce, and visibility drops to zero.</p>
        <button @onclick='() => MakeChoice("find_shelter")' class="choice-btn">Search for shelter</button>
        <button @onclick='() => MakeChoice("keep_walking")' class="choice-btn">Keep walking through the storm</button>
        <button @onclick='() => MakeChoice("dig_in_sand")' class="choice-btn">Dig into the sand for protection</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "find_shelter")
{
    <div>
        <h4>ğŸ›ï¸ Desert Ruins</h4>
        <p>You search desperately and find ancient ruins partially buried in the sand. You take shelter inside.</p>
        <p>Once the storm passes, you explore the ruins and discover they're part of a lost templeâ€”and inside, you find the treasure!</p>
        <p><strong>ğŸ† Victory! The storm led you to forgotten riches!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "keep_walking")
{
    <div>
        <h4>ğŸŒªï¸ Lost in the Storm</h4>
        <p>You push forward through the sandstorm, but the winds are too strong. Sand fills your eyes and lungs.</p>
        <p>You become completely disoriented and eventually collapse from exhaustion.</p>
        <p><strong>ğŸ’€ Game Over! The desert is unforgiving.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "dig_in_sand")
{
    <div>
        <h4>â›ï¸ Buried Discovery</h4>
        <p>You dig into the sand to create a protective hollow. As you dig, your hands strike something hardâ€”metal!</p>
        <p>You've accidentally uncovered a buried treasure chest! The storm buried many treasures over the centuries.</p>
        <p><strong>ğŸ† Victory! Lucky discovery in the storm!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "rest_at_oasis")
{
    <div>
        <h4>ğŸŒ´ Peaceful Reflection</h4>
        <p>You rest by the oasis waters, watching the traders. One elderly trader approaches you with a knowing smile.</p>
        <p>"I see you're seeking the treasure," he says. "I know where it is, but you must answer my question first."</p>
        <p>"What is more valuable than the treasure itself?"</p>
        <button @onclick='() => MakeChoice("answer_journey")' class="choice-btn">The journey to find it</button>
        <button @onclick='() => MakeChoice("answer_friends")' class="choice-btn">The friends made along the way</button>
        <button @onclick='() => MakeChoice("answer_wisdom")' class="choice-btn">The wisdom gained</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_journey")
{
    <div>
        <h4>âœ… Wise Answer!</h4>
        <p>"Indeed," the trader nods. "The journey shapes who we become."</p>
        <p>He hands you a map showing the treasure's exact location. "You've earned this."</p>
        <p>Following the map, you successfully retrieve the treasure!</p>
        <p><strong>ğŸ† Victory! Understanding the true value of adventure!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_friends")
{
    <div>
        <h4>ğŸ’ Heartfelt Answer!</h4>
        <p>The trader smiles warmly. "A treasure hunter with a heart! Rare indeed."</p>
        <p>He introduces you to his network of traders, and together you find not just one treasure, but many!</p>
        <p><strong>ğŸ† Victory! Valuing friendship over gold brings both!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_wisdom")
{
    <div>
        <h4>ğŸ“š Thoughtful Answer!</h4>
        <p>"Wisdom," the trader repeats. "Yes, knowledge outlasts gold."</p>
        <p>He teaches you ancient secrets of treasure hunting. With this knowledge, you become a legendary treasure hunter!</p>
        <p><strong>ğŸ† Victory! Wisdom is the ultimate treasure!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "frozen_lake")
{
    <div>
        <h4>â„ï¸ The Frozen Lake</h4>
        <p>You discover a path leading to a frozen lake. The ice is thick and clear, and you can see something glowing beneath it!</p>
        <p>A ice fishing village sits at the lake's edge. The villagers warn you the ice is dangerous this time of year.</p>
        <button @onclick='() => MakeChoice("cross_ice")' class="choice-btn">Carefully cross the ice to the glow</button>
        <button @onclick='() => MakeChoice("ask_villagers")' class="choice-btn">Ask villagers about the glow</button>
        <button @onclick='() => MakeChoice("wait_for_thaw")' class="choice-btn">Wait for the ice to thaw</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "cross_ice")
{
    <div>
        <h4>ğŸ§Š Icy Danger</h4>
        <p>You step onto the ice carefully. Halfway to the glowing object, you hear a loud CRACK!</p>
        <p>The ice breaks beneath you, and you plunge into the freezing water!</p>
        <p><strong>ğŸ’€ Game Over! The frozen lake claimed another victim.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "ask_villagers")
{
    <div>
        <h4>ğŸ£ Villager Wisdom</h4>
        <p>The villagers tell you about the glowing objectâ€”it's a magical gem that appeared in the lake decades ago.</p>
        <p>"We've been protecting it," they explain. "Many have died trying to take it. But you asked instead of just taking. That shows respect."</p>
        <p>They use their ice fishing techniques to safely retrieve the gem for you. It's worth more than the treasure you were seeking!</p>
        <p><strong>ğŸ† Victory! Respect and cooperation triumph!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "wait_for_thaw")
{
    <div>
        <h4>â³ Patient Wait</h4>
        <p>You decide to wait for spring. You spend the winter with the villagers, learning their ways.</p>
        <p>When the ice finally thaws, the glowing object floats to the surface. You retrieve it safely!</p>
        <p>But more than that, you've found a new home with the villagers.</p>
        <p><strong>ğŸ† Victory! Patience and community bring rewards!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "jungle_temple")
{
    <div>
        <h4>ğŸŒº The Jungle Temple</h4>
        <p>A hidden jungle path leads you to ancient stone temples covered in vines. The air is thick and humid.</p>
        <p>You discover three temple entrances, each with different markings: a serpent, a jaguar, and an eagle.</p>
        <button @onclick='() => MakeChoice("serpent_temple")' class="choice-btn">Enter the serpent temple</button>
        <button @onclick='() => MakeChoice("jaguar_temple")' class="choice-btn">Enter the jaguar temple</button>
        <button @onclick='() => MakeChoice("eagle_temple")' class="choice-btn">Enter the eagle temple</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "serpent_temple")
{
    <div>
        <h4>ğŸ Temple of the Serpent</h4>
        <p>You enter the serpent temple. The walls are carved with images of giant snakes. The passage is narrow and winding.</p>
        <p>You reach a chamber with a large serpent statue. Its eyes seem to follow you. At its base lies a golden chalice!</p>
        <button @onclick='() => MakeChoice("take_chalice")' class="choice-btn">Take the golden chalice</button>
        <button @onclick='() => MakeChoice("bow_to_serpent")' class="choice-btn">Bow to the serpent statue first</button>
        <button @onclick='() => MakeChoice("leave_offering")' class="choice-btn">Leave an offering before taking</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "take_chalice")
{
    <div>
        <h4>âš¡ Triggered Trap!</h4>
        <p>As soon as you touch the chalice, the serpent statue's eyes glow red! Poison darts shoot from the walls!</p>
        <p>You try to dodge, but there are too many.</p>
        <p><strong>ğŸ’€ Game Over! The temple was protected by ancient traps.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "bow_to_serpent")
{
    <div>
        <h4>ğŸ™ Respectful Approach</h4>
        <p>You bow deeply to the serpent statue, showing respect to the ancient guardians.</p>
        <p>The statue's eyes glow greenâ€”a sign of approval! A secret door opens, revealing a chamber full of treasures!</p>
        <p><strong>ğŸ† Victory! Respect for ancient ways rewarded!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "leave_offering")
{
    <div>
        <h4>ğŸ Sacred Offering</h4>
        <p>You place a valuable item from your pack at the statue's base as an offering.</p>
        <p>The serpent statue animates! It speaks in an ancient language, but you understand: "Your offering is accepted."</p>
        <p>The chalice transforms into a map leading to even greater treasures!</p>
        <p><strong>ğŸ† Victory! Honoring the ancients brings blessings!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "jaguar_temple")
{
    <div>
        <h4>ğŸ† Temple of the Jaguar</h4>
        <p>The jaguar temple is dark and filled with the sounds of prowling cats. You proceed cautiously.</p>
        <p>You find a chamber with three doors. Above each door is a riddle carved in stone.</p>
        <p>Door 1: "I am strength." Door 2: "I am stealth." Door 3: "I am patience."</p>
        <button @onclick='() => MakeChoice("strength_door")' class="choice-btn">Choose strength</button>
        <button @onclick='() => MakeChoice("stealth_door")' class="choice-btn">Choose stealth</button>
        <button @onclick='() => MakeChoice("patience_door")' class="choice-btn">Choose patience</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "strength_door")
{
    <div>
        <h4>ğŸ’ª Trial of Strength</h4>
        <p>You choose strength. The door opens to a chamber with a massive stone blocking the way to the treasure.</p>
        <p>You push with all your might, but the stone doesn't budge. You realize brute strength isn't always the answer.</p>
        <p><strong>ğŸ˜ Loss: Strength alone cannot solve every problem.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "stealth_door")
{
    <div>
        <h4>ğŸ¤« Trial of Stealth</h4>
        <p>The stealth door leads to a hall filled with pressure plates. You move silently and carefully, avoiding each trap.</p>
        <p>Your stealthy approach allows you to navigate safely to the treasure chamber!</p>
        <p><strong>ğŸ† Victory! The way of the jaguarâ€”silent and deadly!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "patience_door")
{
    <div>
        <h4>â° Trial of Patience</h4>
        <p>The patience door opens to an empty room. You wait, watching carefully.</p>
        <p>After an hour, a secret passage slowly reveals itself in the wall. Your patience is rewarded!</p>
        <p>Through the passage, you find the treasure and ancient wisdom texts!</p>
        <p><strong>ğŸ† Victory! Patience reveals all secrets!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "eagle_temple")
{
    <div>
        <h4>ğŸ¦… Temple of the Eagle</h4>
        <p>The eagle temple has a tall central tower reaching toward the sky. You must climb to reach the treasure at the top.</p>
        <p>The climb is treacherous, with crumbling handholds and strong winds.</p>
        <button @onclick='() => MakeChoice("careful_climb")' class="choice-btn">Climb carefully and slowly</button>
        <button @onclick='() => MakeChoice("fast_climb")' class="choice-btn">Climb quickly before you lose nerve</button>
        <button @onclick='() => MakeChoice("find_stairs")' class="choice-btn">Search for interior stairs</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "careful_climb")
{
    <div>
        <h4>ğŸ§— Steady Ascent</h4>
        <p>You take your time, testing each handhold before trusting it with your weight.</p>
        <p>Your careful approach pays off. You reach the top safely and find the treasure overlooking the jungle!</p>
        <p><strong>ğŸ† Victory! Careful planning beats reckless speed!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "fast_climb")
{
    <div>
        <h4>âš¡ Hasty Mistake</h4>
        <p>You rush up the tower, trying to reach the top quickly. Halfway up, a handhold crumbles under your grip!</p>
        <p>You lose your balance and fall!</p>
        <p><strong>ğŸ’€ Game Over! Haste makes waste.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "find_stairs")
{
    <div>
        <h4>ğŸ›ï¸ The Hidden Way</h4>
        <p>You search the temple base and discover hidden interior stairs! The ancient architects built a safe way up.</p>
        <p>You climb the stairs easily and reach the treasure chamber. Sometimes the smart path is better than the obvious one!</p>
        <p><strong>ğŸ† Victory! Wisdom finds the better path!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "sky_path")
{
    <div>
        <h4>â˜ï¸ The Ascending Trail</h4>
        <p>You find a path that winds up a mountain. As you climb higher, you enter the clouds themselves.</p>
        <p>At the peak, you discover a floating island in the sky! A magical staircase of solidified clouds leads up to it.</p>
        <button @onclick='() => MakeChoice("climb_cloud_stairs")' class="choice-btn">Climb the cloud staircase</button>
        <button @onclick='() => MakeChoice("call_out")' class="choice-btn">Call out to see if anyone is there</button>
        <button @onclick='() => MakeChoice("study_clouds")' class="choice-btn">Study the cloud formation</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "climb_cloud_stairs")
{
    <div>
        <h4>â˜ï¸ Walking on Air</h4>
        <p>You tentatively step onto the cloud staircase. Amazingly, it holds your weight! Each step is soft but solid.</p>
        <p>You climb higher and reach the floating island. A magnificent sky palace awaits, but you see three entrances.</p>
        <button @onclick='() => MakeChoice("enter_main_gate")' class="choice-btn">Enter through the main gate</button>
        <button @onclick='() => MakeChoice("side_entrance")' class="choice-btn">Try the side entrance</button>
        <button @onclick='() => MakeChoice("wait_at_entrance")' class="choice-btn">Wait respectfully at the entrance</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "enter_main_gate")
{
    <div>
        <h4>ğŸšª Grand Entrance</h4>
        <p>You walk through the main gate boldly. Inside, cloud spirits guard magnificent halls.</p>
        <p>They test your worthiness with a question: "What is lighter than a feather yet even the strongest cannot hold for long?"</p>
        <button @onclick='() => MakeChoice("answer_breath")' class="choice-btn">Your breath</button>
        <button @onclick='() => MakeChoice("answer_cloud")' class="choice-btn">A cloud</button>
        <button @onclick='() => MakeChoice("answer_thought")' class="choice-btn">A thought</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_breath")
{
    <div>
        <h4>âœ… Correct!</h4>
        <p>"Yes!" the spirits cheer. "Breath is lighter than a feather, yet none can hold it forever."</p>
        <p>They welcome you to the treasure chamber with full honors!</p>
        <p><strong>ğŸ† Victory! Wisdom earned the spirits' trust!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_cloud")
{
    <div>
        <h4>âŒ Incorrect</h4>
        <p>"A cloud can be held in a jar," the spirits explain. "Try again another time."</p>
        <p>You must leave without the treasure.</p>
        <p><strong>ğŸ˜ Loss: The riddle was tricky.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_thought")
{
    <div>
        <h4>âŒ Not Quite</h4>
        <p>"Thoughts can persist for years," the spirits say. "That's not the answer."</p>
        <p>You're turned away from the treasure.</p>
        <p><strong>ğŸ˜ Loss: So close to the right answer.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "side_entrance")
{
    <div>
        <h4>ğŸšª Humble Path</h4>
        <p>You enter through a smaller side entrance. A single elderly spirit sits there, knitting clouds.</p>
        <p>"Not many choose the humble path," she smiles. "What brings you here, traveler?"</p>
        <button @onclick='() => MakeChoice("tell_truth_sky")' class="choice-btn">Tell her honestly about the treasure</button>
        <button @onclick='() => MakeChoice("pretend_tourist")' class="choice-btn">Pretend you're just a tourist</button>
        <button @onclick='() => MakeChoice("ask_about_her")' class="choice-btn">Ask about her and her work</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "tell_truth_sky")
{
    <div>
        <h4>ğŸ—£ï¸ Honest Heart</h4>
        <p>"Honesty!" the spirit beams. "So rare. Come, the treasure is yours."</p>
        <p>She leads you directly to the treasure vault. Honesty was the best policy!</p>
        <p><strong>ğŸ† Victory! Truth opened the way!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "pretend_tourist")
{
    <div>
        <h4>ğŸ­ Deception Detected</h4>
        <p>The spirit's eyes narrow. "Lies cloud the soul," she says sadly. "You must leave."</p>
        <p>Spirits can always sense deception. You're escorted out empty-handed.</p>
        <p><strong>ğŸ˜ Loss: Lying to spirits never works.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "ask_about_her")
{
    <div>
        <h4>ğŸ’¬ Kind Curiosity</h4>
        <p>The spirit is delighted by your interest! She tells you fascinating stories about cloud weaving.</p>
        <p>"You're the first to ask about me in centuries," she says. "For that kindness, I'll show you the treasure."</p>
        <p>She weaves you a cloud key that opens the treasure vault!</p>
        <p><strong>ğŸ† Victory! Kindness and curiosity were rewarded!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "wait_at_entrance")
{
    <div>
        <h4>â° Patient Visitor</h4>
        <p>You wait respectfully at the entrance. After some time, a grand spirit approaches.</p>
        <p>"Patience and respect," he nods approvingly. "You understand cloud palace etiquette."</p>
        <p>He personally escorts you to the treasure chamber!</p>
        <p><strong>ğŸ† Victory! Patience proved your worth!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "call_out")
{
    <div>
        <h4>ğŸ“£ Hello Above!</h4>
        <p>You call out to the floating island politely. Several cloud spirits descend to greet you!</p>
        <p>They're impressed by your courtesy and offer you choices for reaching the island.</p>
        <button @onclick='() => MakeChoice("ride_cloud_chariot")' class="choice-btn">Ride in their cloud chariot</button>
        <button @onclick='() => MakeChoice("earn_cloud_wings")' class="choice-btn">Ask to earn cloud wings</button>
        <button @onclick='() => MakeChoice("climb_with_help")' class="choice-btn">Climb with their guidance</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "ride_cloud_chariot")
{
    <div>
        <h4>ğŸŒ¬ï¸ Majestic Ride</h4>
        <p>The spirits conjure a chariot made of swirling clouds. You ride in style to the floating island!</p>
        <p>They appreciate visitors who accept their hospitality. The treasure is freely given!</p>
        <p><strong>ğŸ† Victory! Accepting gracious offers brings rewards!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "earn_cloud_wings")
{
    <div>
        <h4>ğŸ•Šï¸ Trial of Flight</h4>
        <p>You ask to earn wings rather than take the easy path. The spirits are impressed!</p>
        <p>"Few ask to earn what we offer freely," they say. "This shows true character."</p>
        <p>They give you permanent cloud wings AND the treasure!</p>
        <p><strong>ğŸ† Victory! Choosing to earn rather than receive freely showed great character!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "climb_with_help")
{
    <div>
        <h4>ğŸ¤ Guided Ascent</h4>
        <p>With the spirits guiding and encouraging you, you climb the cloud stairs safely.</p>
        <p>They appreciate your humility in accepting help. The treasure awaits at the top!</p>
        <p><strong>ğŸ† Victory! Accepting help is a strength, not weakness!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "study_clouds")
{
    <div>
        <h4>ğŸŒªï¸ Lost in Mist</h4>
        <p>As you study the clouds, they suddenly shift and swirl around you. You become disoriented in the thick mist.</p>
        <p>By the time the mist clears, you've lost your bearings and can't find the floating island again.</p>
        <p><strong>ğŸ˜ Loss: Sometimes overthinking leads nowhere.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "volcanic_cave")
{
    <div>
        <h4>ğŸŒ‹ The Volcanic Passage</h4>
        <p>You discover a cave system heated by volcanic activity. The walls glow with orange heat, and steam vents hiss constantly.</p>
        <p>Deep in the caves, you find three passages: one leads deeper down toward magma, one leads across a lava tube, and one leads up toward cooler air.</p>
        <button @onclick='() => MakeChoice("deeper_magma")' class="choice-btn">Go deeper toward the magma</button>
        <button @onclick='() => MakeChoice("cross_lava_tube")' class="choice-btn">Cross the lava tube</button>
        <button @onclick='() => MakeChoice("toward_cooler_air")' class="choice-btn">Head toward cooler air</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "deeper_magma")
{
    <div>
        <h4>ğŸ”¥ Heart of Fire</h4>
        <p>You descend deeper, the heat becoming almost unbearable. You reach a chamber with a magma pool.</p>
        <p>Floating above the magma is a fire elemental! "Brave one," it says. "Few dare come this deep. What do you seek?"</p>
        <button @onclick='() => MakeChoice("seek_treasure")' class="choice-btn">Tell it you seek treasure</button>
        <button @onclick='() => MakeChoice("seek_knowledge")' class="choice-btn">Ask for knowledge of the caves</button>
        <button @onclick='() => MakeChoice("seek_power")' class="choice-btn">Request power over fire</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "seek_treasure")
{
    <div>
        <h4>ğŸ’ Honest Desire</h4>
        <p>"Honesty," the elemental muses. "Rare among your kind. Very well."</p>
        <p>The elemental parts the magma, revealing a hidden chamber filled with fire-forged treasures!</p>
        <p><strong>ğŸ† Victory! Honesty even with powerful beings brings rewards!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "seek_knowledge")
{
    <div>
        <h4>ğŸ“š Seeker of Truth</h4>
        <p>"Knowledge?" the elemental seems pleased. "Then learn this: the greatest treasure isn't gold, but understanding."</p>
        <p>The elemental teaches you ancient secrets of the earth. With this knowledge, you can find treasures anywhere!</p>
        <p><strong>ğŸ† Victory! Knowledge is power and fortune!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "seek_power")
{
    <div>
        <h4>âš¡ Dangerous Request</h4>
        <p>"Power?" the elemental's voice turns cold. "You seek to control that which cannot be controlled!"</p>
        <p>The elemental attacks, and the volcanic heat overwhelms you!</p>
        <p><strong>ğŸ’€ Game Over! Greed for power led to destruction.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "cross_lava_tube")
{
    <div>
        <h4>ğŸª¨ The Lava Tube</h4>
        <p>You carefully navigate the solidified lava tube. The walls are still warm, and occasional drips of lava fall from the ceiling.</p>
        <p>The tube leads you to a geothermal spring chamber with glowing crystals growing from the minerals!</p>
        <p>Among the crystals, you find ancient artifactsâ€”the treasure you've been seeking!</p>
        <p><strong>ğŸ† Victory! The middle path proves wisest!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "toward_cooler_air")
{
    <div>
        <h4>ğŸŒ¬ï¸ The Safe Exit</h4>
        <p>You follow the cooler air upward, eventually emerging on the outside of the volcano.</p>
        <p>From this vantage point, you spot a hidden valley below with ancient structuresâ€”likely where the treasure is!</p>
        <p>You descend and indeed find the treasure cache in the valley!</p>
        <p><strong>ğŸ† Victory! Safety first led you to success!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "enchanted_garden")
{
    <div>
        <h4>ğŸŒ¸ The Enchanted Garden</h4>
        <p>You find a hidden garden filled with magical flowers that glow and sing. In the center is a fountain with golden water.</p>
        <p>A fairy appears! "Welcome to my garden. The treasure you seek is here, but you must prove your worth."</p>
        <button @onclick='() => MakeChoice("help_garden")' class="choice-btn">Offer to help tend the garden</button>
        <button @onclick='() => MakeChoice("demand_treasure")' class="choice-btn">Demand the treasure</button>
        <button @onclick='() => MakeChoice("compliment_fairy")' class="choice-btn">Compliment the fairy's beautiful garden</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "help_garden")
{
    <div>
        <h4>ğŸŒ± Helpful Hands</h4>
        <p>You spend the day helping the fairy tend the magical garden. It's peaceful, joyful work.</p>
        <p>"You have a gentle spirit," the fairy says. "The treasure is yoursâ€”you've already proven your worth."</p>
        <p>She leads you to a tree where the treasure has been hidden, protected by her magic!</p>
        <p><strong>ğŸ† Victory! Kindness and service earn great rewards!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "demand_treasure")
{
    <div>
        <h4>ğŸ˜¤ Rude Demand</h4>
        <p>The fairy's expression turns stormy. "You dare demand from me? Leave my garden at once!"</p>
        <p>Magic vines wrap around you and eject you from the garden. You land far away in the forest.</p>
        <p><strong>ğŸ˜ Loss: Rudeness closes doors that respect opens.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "compliment_fairy")
{
    <div>
        <h4>ğŸ’ Sincere Appreciation</h4>
        <p>You genuinely compliment the fairy on her magnificent garden. Her smile brightens the entire space!</p>
        <p>"How delightful! Someone who appreciates beauty! Here, let me show you my greatest treasure."</p>
        <p>She reveals a secret grove where treasures from across the ages are stored!</p>
        <p><strong>ğŸ† Victory! Appreciation and kindness unlock treasures!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "time_rift")
{
    <div>
        <h4>â° The Time Anomaly</h4>
        <p>You stumble upon a shimmering rift in reality. Through it, you can see different time periodsâ€”past, present, and future.</p>
        <p>A time guardian appears. "Choose wisely. Enter one of these rifts to find your treasure."</p>
        <button @onclick='() => MakeChoice("enter_past")' class="choice-btn">Enter the past (see ancient times)</button>
        <button @onclick='() => MakeChoice("stay_present")' class="choice-btn">Stay in the present</button>
        <button @onclick='() => MakeChoice("enter_future")' class="choice-btn">Enter the future (see what's to come)</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "enter_past")
{
    <div>
        <h4>ğŸ›ï¸ Ancient Times</h4>
        <p>You step through the rift into the past. You witness the treasure being hidden by ancient peoples!</p>
        <p>You memorize the exact location, then return to your present time. Finding it is now easy!</p>
        <p><strong>ğŸ† Victory! Learning from the past guides your future!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "stay_present")
{
    <div>
        <h4>â³ Present Moment</h4>
        <p>"Wise choice," the guardian says. "Many lose themselves in other times. The treasure is here, now."</p>
        <p>The guardian rewards your wisdom by showing you where the treasure is hidden in your current time!</p>
        <p><strong>ğŸ† Victory! Living in the present brings its own rewards!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "enter_future")
{
    <div>
        <h4>ğŸ”® Future Vision</h4>
        <p>You step into the future. You see yourself as an old person, wealthy and successfulâ€”but alone.</p>
        <p>The vision shows you found treasure but lost everything else chasing it. Do you want this future?</p>
        <button @onclick='() => MakeChoice("reject_future")' class="choice-btn">Reject this future</button>
        <button @onclick='() => MakeChoice("accept_future")' class="choice-btn">Accept this future</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "reject_future")
{
    <div>
        <h4>ğŸ”„ Change Your Path</h4>
        <p>You reject that lonely future and return to the present, vowing to balance treasure with relationships.</p>
        <p>The time guardian is impressed. "You've learned the true lesson. Here, take this treasureâ€”but remember what matters most."</p>
        <p><strong>ğŸ† Victory! You found treasure and wisdom!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "accept_future")
{
    <div>
        <h4>ğŸ’° Lonely Riches</h4>
        <p>You accept that future. You return and indeed find the treasure, becoming wealthy.</p>
        <p>But years later, you realize the future was rightâ€”you have gold but no one to share it with.</p>
        <p><strong>ğŸ˜ Loss: Treasure without purpose is empty.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "mirror_maze")
{
    <div>
        <h4>ğŸª The Hall of Mirrors</h4>
        <p>You enter a vast hall filled with mirrors. Each shows a different reflectionâ€”some true, some false.</p>
        <p>In the center is a pedestal with three mirrors labeled: Truth, Illusion, and Self.</p>
        <button @onclick='() => MakeChoice("mirror_truth")' class="choice-btn">Look into the Mirror of Truth</button>
        <button @onclick='() => MakeChoice("mirror_illusion")' class="choice-btn">Look into the Mirror of Illusion</button>
        <button @onclick='() => MakeChoice("mirror_self")' class="choice-btn">Look into the Mirror of Self</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "mirror_truth")
{
    <div>
        <h4>âœ¨ The True Path</h4>
        <p>The Mirror of Truth shows you reality without embellishment. You see the exact path to the treasure.</p>
        <p>The path isn't glamorous, but it's real and direct. You follow it and claim your prize!</p>
        <p><strong>ğŸ† Victory! Truth reveals the way forward!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "mirror_illusion")
{
    <div>
        <h4>ğŸŒ€ Lost in Illusions</h4>
        <p>The Mirror of Illusion shows you what you want to seeâ€”easy paths, guaranteed success, no challenges.</p>
        <p>You follow these illusions deeper into the maze, but they're all false. You become hopelessly lost.</p>
        <p><strong>ğŸ˜ Loss: Illusions lead nowhere.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "mirror_self")
{
    <div>
        <h4>ğŸ§˜ Know Thyself</h4>
        <p>The Mirror of Self shows you who you really areâ€”strengths, weaknesses, hopes, and fears.</p>
        <p>Understanding yourself, you realize what treasure truly means to you. This clarity guides you directly to what you seek!</p>
        <p><strong>ğŸ† Victory! Self-knowledge is the key to all things!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "singing_stones")
{
    <div>
        <h4>ğŸµ The Melodic Path</h4>
        <p>You discover a circle of ancient standing stones that hum with musical tones. Each stone vibrates at a different frequency.</p>
        <p>A mystical musician appears. "Play the correct sequence, and the treasure is yours."</p>
        <button @onclick='() => MakeChoice("low_to_high")' class="choice-btn">Play from lowest to highest tone</button>
        <button @onclick='() => MakeChoice("random_pattern")' class="choice-btn">Play a random joyful pattern</button>
        <button @onclick='() => MakeChoice("listen_first")' class="choice-btn">Listen to the stones first</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "low_to_high")
{
    <div>
        <h4>ğŸ¼ Logical Approach</h4>
        <p>You play the stones from lowest to highest, creating a rising scale. It's pleasant but nothing happens.</p>
        <p>"Logical, but not correct," the musician says sadly. You must leave without the treasure.</p>
        <p><strong>ğŸ˜ Loss: Logic isn't always the answer to music.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "random_pattern")
{
    <div>
        <h4>ğŸ¹ Joyful Music</h4>
        <p>You play a joyful, random pattern from your heart. The stones respond with beautiful harmonies!</p>
        <p>"Music from the soul!" the musician exclaims. "That's the secret!" The stones glow and reveal the treasure!</p>
        <p><strong>ğŸ† Victory! Heart and joy unlock magical rewards!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "listen_first")
{
    <div>
        <h4>ğŸ‘‚ Patient Listening</h4>
        <p>You spend time listening to each stone. They're not randomâ€”they're playing a subtle melody together!</p>
        <p>You join in with the existing song rather than creating your own. The musician smiles.</p>
        <p>"You understand harmony! The treasure is yours." The stones part to reveal a hidden vault!</p>
        <p><strong>ğŸ† Victory! Listening before acting shows wisdom!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "library_eternal")
{
    <div>
        <h4>ğŸ“– The Infinite Library</h4>
        <p>You discover a massive library containing every book ever written and yet to be written. An ancient librarian greets you.</p>
        <p>"Seeking treasure? The real treasure is knowledge. But I'll make you a dealâ€”answer my question, and you can have both."</p>
        <p>"In a library of infinite books, which is most valuable?"</p>
        <button @onclick='() => MakeChoice("answer_first_book")' class="choice-btn">The first book ever written</button>
        <button @onclick='() => MakeChoice("answer_unwritten_book")' class="choice-btn">The book yet to be written</button>
        <button @onclick='() => MakeChoice("answer_readers_book")' class="choice-btn">The book the reader needs most</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_first_book")
{
    <div>
        <h4>ğŸ“• Historical Value</h4>
        <p>"The first book holds history," the librarian nods, "but not the answer I sought."</p>
        <p>You may browse the library but can't access the treasure vault. Still, you learn much.</p>
        <p><strong>ğŸ˜ Loss: History is valuable, but not the complete answer.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_unwritten_book")
{
    <div>
        <h4>ğŸ“— Future Potential</h4>
        <p>"Interesting," the librarian muses. "You value potential. But that's not quite right."</p>
        <p>The treasure remains locked, though the librarian gifts you a special book about treasure hunting.</p>
        <p><strong>ğŸ˜ Loss: Potential alone isn't enough.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "answer_readers_book")
{
    <div>
        <h4>ğŸ“˜ Perfect Answer!</h4>
        <p>"Yes!" the librarian beams. "The most valuable book is always the one the reader needs at that moment!"</p>
        <p>"You understand that treasure, like knowledge, is personal. Hereâ€”both knowledge AND material treasure are yours!"</p>
        <p>She leads you to a vault filled with treasures AND books of ancient wisdom!</p>
        <p><strong>ğŸ† Victory! Understanding context and need is true wisdom!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "crystal_tower")
{
    <div>
        <h4>ğŸ—¼ The Crystal Tower</h4>
        <p>You discover a tower made entirely of crystal, rising high into the sky. At its peak, a light shines.</p>
        <p>An inscription at the base reads: "Climb with pure intentions, and claim your reward."</p>
        <button @onclick='() => MakeChoice("climb_tower_greed")' class="choice-btn">Climb thinking of the treasure</button>
        <button @onclick='() => MakeChoice("climb_tower_pure")' class="choice-btn">Climb with thoughts of helping others</button>
        <button @onclick='() => MakeChoice("admire_tower")' class="choice-btn">Simply admire the tower's beauty</button>
        <hr />
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "climb_tower_greed")
{
    <div>
        <h4>âš ï¸ Impure Intent</h4>
        <p>As you climb thinking only of treasure, the crystal begins to darken. Your greed taints the pure crystal!</p>
        <p>The tower rejects you, and you slide back down to the bottom. The entrance seals shut.</p>
        <p><strong>ğŸ˜ Loss: Greed corrupts even the purest paths.</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "climb_tower_pure")
{
    <div>
        <h4>âœ¨ Pure of Heart</h4>
        <p>You climb thinking of how the treasure could help your village and loved ones. The crystal glows brighter with each step!</p>
        <p>At the top, you find not just treasure, but a crystal that can heal and bring prosperity to all!</p>
        <p><strong>ğŸ† Victory! Pure intentions are rewarded beyond measure!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}
else if (currentNode == "admire_tower")
{
    <div>
        <h4>ğŸŒŸ Simple Appreciation</h4>
        <p>You simply admire the tower's beauty without any thought of treasure. The crystal responds to your pure appreciation!</p>
        <p>A door opens at the baseâ€”the tower offers you its treasures freely for appreciating it as it is!</p>
        <p><strong>ğŸ† Victory! Sometimes appreciation is all that's needed!</strong></p>
        <button @onclick="RestartGame" class="choice-btn">Play Again</button>
        <button @onclick="OnExit.InvokeAsync">Back to Menu</button>
    </div>
}

@code {
    [Parameter] public EventCallback OnExit { get; set; }

    private string currentNode = "start";

    private void MakeChoice(string nextNode)
    {
        string previousNode = currentNode;
        currentNode = nextNode;

        // Track game outcomes
        if (IsWinNode(nextNode))
        {
            Engine.AddWin();
        }
        else if (IsDeathNode(nextNode))
        {
            Engine.AddDeath();
        }
        else if (IsLossNode(nextNode))
        {
            Engine.AddLoss();
        }

        StateHasChanged();
    }

    private void RestartGame()
    {
        currentNode = "start";
        StateHasChanged();
    }

    private bool IsWinNode(string node)
    {
        return node == "buy_compass" || node == "befriend_wolf" || node == "swim_pond" || node == "uphill" 
            || node == "join_travelers" || node == "crystal_caves" || node == "enter_cave" 
            || node == "three_trunk_oak" || node == "rest_by_pond" || node == "follow_symbols"
            || node == "pay_hermit" || node == "behind_waterfall" || node == "answer_echo"
            || node == "touch_red_orb" || node == "touch_green_orb" || node == "answer_love"
            || node == "answer_footsteps" || node == "study_paintings" || node == "follow_river_bank"
            || node == "answer_river" || node == "respect_eagle" || node == "feed_eagle" 
            || node == "approach_campfire" || node == "sun_door" || node == "accept_warning"
            || node == "persist_treasure" || node == "wealth_scroll" || node == "wisdom_scroll"
            || node == "adventure_scroll" || node == "drink_fountain" || node == "pet_unicorn"
            || node == "examine_crystals" || node == "swim_to_island" || node == "build_raft"
            || node == "search_for_boat" || node == "answer_future" || node == "use_stepping_stones"
            || node == "pull_lever" || node == "look_for_alternative"
            || node == "join_caravan" || node == "find_shelter"
            || node == "dig_in_sand" || node == "answer_journey" || node == "answer_friends"
            || node == "answer_wisdom" || node == "ask_villagers" || node == "wait_for_thaw"
            || node == "bow_to_serpent" || node == "leave_offering" || node == "stealth_door"
            || node == "patience_door" || node == "careful_climb" || node == "find_stairs"
            || node == "seek_treasure" || node == "seek_knowledge" || node == "cross_lava_tube"
            || node == "toward_cooler_air" || node == "help_garden" || node == "compliment_fairy"
            || node == "enter_past" || node == "stay_present" || node == "reject_future"
            || node == "mirror_truth" || node == "mirror_self" || node == "random_pattern"
            || node == "listen_first" || node == "answer_readers_book" || node == "climb_tower_pure"
            || node == "admire_tower"
            // New eastern_path wins
            || node == "resist_singing" || node == "plug_ears" || node == "search_wreck"
            || node == "descend_to_ruins" || node == "use_telescope" || node == "hire_shepherd"
            || node == "trade_with_shepherd" || node == "wait_for_calm"
            || node == "speak_to_guardians" || node == "show_respect" || node == "swim_underground_lake"
            || node == "find_boat_underground" || node == "knock_on_door" || node == "examine_tree"
            || node == "touch_roots" || node == "cross_rope_bridge" || node == "test_bridge_first"
            || node == "decode_lantern" || node == "test_climbing_gear" || node == "follow_fireflies"
            || node == "stay_in_tower_night" || node == "signal_lights"
            // New sky_path wins
            || node == "answer_breath" || node == "tell_truth_sky" || node == "ask_about_her"
            || node == "wait_at_entrance" || node == "ride_cloud_chariot" || node == "earn_cloud_wings"
            || node == "climb_with_help";
    }

    private bool IsDeathNode(string node)
    {
        return node == "rob_merchant" || node == "fight_wolf" || node == "drink_water" 
            || node == "explore_ravine" || node == "ancient_ruins" || node == "dark_forest_ahead"
            || node == "take_narrow_ledge" || node == "take_egg" || node == "night_explore"
            || node == "keep_walking" || node == "cross_ice" || node == "take_chalice"
            || node == "fast_climb" || node == "seek_power"
            // New eastern_path deaths
            || node == "follow_singing" || node == "sneak_past_guardians" || node == "push_through_wind";
    }

    private bool IsLossNode(string node)
    {
        return node == "sneak_past" || node == "continue_down" || node == "ignore_symbols"
            || node == "decline_hermit" || node == "climb_waterfall" || node == "answer_wind" || node == "answer_voice"
            || node == "answer_knowledge" || node == "answer_time" || node == "answer_statue" || node == "answer_gloves"
            || node == "answer_painting" || node == "answer_dream" || node == "answer_memories" || node == "answer_breath"
            || node == "attempt_troll_bribe" || node == "give_up_search" || node == "collect_crystals" || node == "dive_for_shiny"
            || node == "answer_time2" || node == "answer_nose" || node == "camp_alone"
            || node == "answer_air" || node == "answer_hope" || node == "study_clouds"
            || node == "strength_door" || node == "demand_treasure" || node == "accept_future"
            || node == "mirror_illusion" || node == "low_to_high" || node == "answer_first_book"
            || node == "answer_unwritten_book" || node == "climb_tower_greed"
            // New eastern_path losses
            || node == "continue_alone_valley" || node == "walk_around_lake" || node == "find_alternate_crossing"
            || node == "catch_firefly" || node == "return_to_tower_scared"
            // New sky_path losses
            || node == "answer_cloud" || node == "answer_thought" || node == "pretend_tourist";
    }
}